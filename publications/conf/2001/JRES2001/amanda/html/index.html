 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>article.html</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cis.ohio-state.edu/~gurari/TeX4ht/mn.html)"> 
<!--html--> 
<meta name="src" content="article.tex"> 
<meta name="date" content="2001-11-16 10:25:00"> 
<link rel="stylesheet" type="text/css" href="article.css"> 
</head><body 
>
<div class="center" 
>
 <span 
class="ecbx-1200">Utilisation du logiciel de sauvegarde libre</span> <a 
  name="dx1-2"></a><span 
class="ecxc-1200">amanda</span><br>
<span 
class="ecbx-1000">&#8212;</span><br>
<span 
class="ecbx-0900">version </span><span 
class="ecbx-0900">&eacute;tendue</span><br>
<span 
class="ecbx-0900">ENSTBr/INFO/RR/2001-009</span><br>
Ronan <span 
class="eccc-1000">K<small 
class="small-caps">E</small><small 
class="small-caps">R</small><small 
class="small-caps">Y</small><small 
class="small-caps">E</small><small 
class="small-caps">L</small><small 
class="small-caps">L</small></span><br>
16 novembre 2001</div>
   <table width="100%" 
class="abstract"><tr><td 
>
<div class="center" 
>
<span 
class="ecbx-0900">R</span><span 
class="ecbx-0900">&eacute;sum</span><span 
class="ecbx-0900">&eacute;</span></div>
         
     <!--l. 89--><p class="noindent"><span 
class="ecrm-0900">Cet article pr</span><span 
class="ecrm-0900">&eacute;sente le syst</span><span 
class="ecrm-0900">&egrave;me de sauvegardes automatiques libre</span> <a 
  name="dx1-3"></a><span 
class="eccc-0900"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>
     <span 
class="ecrm-0900">bas</span><span 
class="ecrm-0900">&eacute;  sur  une  architecture  distribu</span><span 
class="ecrm-0900">&eacute;e  client-serveur.  Il  est  capable  de</span>
     <span 
class="ecrm-0900">maximiser  l'usage  des  d</span><span 
class="ecrm-0900">&eacute;rouleurs  de  bande  gr</span><span 
class="ecrm-0900">&acirc;ce  </span><span 
class="ecrm-0900">&agrave;  une  planification</span>
     <span 
class="ecrm-0900">dynamique des sauvegardes respectant une liste de contraintes impos</span><span 
class="ecrm-0900">&eacute;es</span>
     <span 
class="ecrm-0900">(occupation r</span><span 
class="ecrm-0900">&eacute;seau, priorit</span><span 
class="ecrm-0900">&eacute; entre partitions, intervalles de sauvegarde,</span>
     <span 
class="ecrm-0900">nombre de cassettes,...). Les formats internes utilis</span><span 
class="ecrm-0900">&eacute;s sont des standards</span>
     <span 
class="ecrm-0900">tr</span><span 
class="ecrm-0900">&egrave;s basiques qui permettent une restauration simple en cas de situation</span>
     <span 
class="ecrm-0900">critique.</span>
     <!--l. 98--><p class="indent">    <span 
class="ecrm-0900">Le syst</span><span 
class="ecrm-0900">&egrave;me expos</span><span 
class="ecrm-0900">&eacute; est d</span><span 
class="ecrm-0900">&eacute;ploy</span><span 
class="ecrm-0900">&eacute; au sein de deux laboratoires de recherche</span>
     <span 
class="ecrm-0900">en informatique </span><span 
class="ecrm-0900">&agrave; l'</span><a 
  name="dx1-4"></a><span 
class="eccc-0900"><small 
class="small-caps">E</small><small 
class="small-caps">N</small><small 
class="small-caps">S</small><small 
class="small-caps">M</small><small 
class="small-caps">P</small> </span><span 
class="ecrm-0900">et </span><span 
class="ecrm-0900">&agrave; l'</span><a 
  name="dx1-5"></a><span 
class="eccc-0900"><small 
class="small-caps">E</small><small 
class="small-caps">N</small><small 
class="small-caps">S</small><small 
class="small-caps">T</small><small 
class="small-caps">B</small></span><span 
class="ecrm-0900">r pour effectuer les sauvegardes de</span>
     <span 
class="ecrm-0900">toutes les machines, qu'elles soient g</span><span 
class="ecrm-0900">&eacute;n</span><span 
class="ecrm-0900">&eacute;riques, serveurs ou d</span><span 
class="ecrm-0900">&eacute;di</span><span 
class="ecrm-0900">&eacute;es </span><span 
class="ecrm-0900">&agrave; un</span>
     <span 
class="ecrm-0900">projet de recherche sur les r</span><span 
class="ecrm-0900">&eacute;seaux actifs.</span>
</td></tr></table>
<a name="section.1"></a>
   <h3 class="sectionHead"><span class="titlemark">1</span> <a 
  name="x1-10001"></a>Introduction</h3>
<!--l. 108--><p class="noindent">Avec le d&eacute;veloppement intensif de l'informatique et de la num&eacute;risation des contenus,
la majorit&eacute; des donn&eacute;es, des connaissances et du savoir faire des entreprises est sous
forme num&eacute;rique et on estime que la majorit&eacute; des entreprises qui perdent leurs
donn&eacute;es n'existent plus dans les 2 ans qui suivent.
<!--l. 114--><p class="indent">   Il est donc primordial d'avoir une politique de sauvegarde &agrave; la hauteur de la
richesse contenue dans ces donn&eacute;es&nbsp;: cyniquement, une donn&eacute;e non sauvegard&eacute;e n'a
pas de valeur. Heureusement les principes de base d'une bonne sauvegarde sont
classiques <span class="cite">[<a 
href="#Xpreston99-unix_backup_recov">Pre99</a>]</span>&nbsp;:
     <ul class="itemize1">
     <li class="itemize">v&eacute;rifier r&eacute;guli&egrave;rement les m&eacute;dia pour &ecirc;tre s&ucirc;r qu'il y a bien, sur les bandes,
     ce qu'on pense y avoir mis<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">stocker les m&eacute;dias de sauvegardes le plus loin possible de ce qui doit &ecirc;tre
     sauvegard&eacute;. C'est possible avec les d&eacute;veloppements des r&eacute;seaux &agrave; haut
     d&eacute;bit mais peut &ecirc;tre plus prosa&iuml;quement mis en &#0339;uvre en transportant
     par exemple des cassettes dans une voiture<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">r&eacute;partir les m&eacute;dias de sauvegardes en diff&eacute;rents lieux pour ne pas &ecirc;tre &agrave;
     la merci de la perte d'un site de stockage<span class="frenchb-thinspace"> </span>;
                                                                  

                                                                  
     </li>
     <li class="itemize">faire le maximum de sauvegardes dans le temps<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">sauvegarder le maximum de donn&eacute;es, car parfois des donn&eacute;es sont stock&eacute;es
     par erreur &agrave; des endroits non pr&eacute;vus ou de mani&egrave;re malicieuse (logiciel de
     piratage,...) et il peut &ecirc;tre n&eacute;cessaire de les r&eacute;cup&eacute;rer.</li></ul>
<!--l. 133--><p class="noindent">Parall&egrave;lement aux sauvegardes qui effectuent en g&eacute;n&eacute;ral un recyclage r&eacute;gulier des
m&eacute;dia de sauvegardes, l'archivage n'est pas &agrave; n&eacute;gliger. Ce dernier va conserver les
m&eacute;dia beaucoup plus longtemps mais avec en g&eacute;n&eacute;ral une p&eacute;riode d'&eacute;chantillonnage
beaucoup plus longue pour des raisons de co&ucirc;t. L'id&eacute;e est de pouvoir parer la perte
d'un fichier effac&eacute; par exemple par erreur et dont on s'aper&ccedil;oit de l'absence seulement
beaucoup plus tard. C'est utile aussi dans les cas d'enqu&ecirc;tes judiciaires ou
d'assurance, etc.
<!--l. 142--><p class="indent">   Malheureusement, derri&egrave;re toutes ces bonnes intentions il y a la dure r&eacute;alit&eacute; de la
vraie vie&nbsp;: ce n'est pas simple d'organiser de bonnes sauvegardes d&egrave;s qu'on a un r&eacute;seau
et plus d'un disque sur une machine unique &agrave; sauvegarder. Par chance il existe de
nombreux logiciels commerciaux permettant de simplifier la t&acirc;che en centralisant la
configuration.
<!--l. 149--><p class="indent">   Mais souvent le co&ucirc;t du logiciel est li&eacute; au nombre de machines sauvegard&eacute;es par le
syst&egrave;me sur le r&eacute;seau et dans le cas de sites avec peu de moyens financiers cela a pour
corollaire de revoir &agrave; la baisse le nombre de machines sauvegard&eacute;es, emp&ecirc;chant de
tout sauvegarder ou de limiter la distribution des disques sur les machines qui
pourrait &ecirc;tre b&eacute;n&eacute;fique.
<!--l. 156--><p class="indent">   Heureusement une alternative existe avec les logiciels libres qui permettent de
sauvegarder un nombre arbitraire de machines et de disques &agrave; co&ucirc;t logiciel nul.
L'int&eacute;r&ecirc;t suppl&eacute;mentaire des logiciels libres dans ce cas sensible est la certitude
de pouvoir extraire les donn&eacute;es du m&eacute;dia (sans &ecirc;tre n&eacute;anmoins &agrave; l'abri de
l'usure du support ou de bugs) car les sources qui ont &eacute;crit les donn&eacute;es sont
disponibles.
<!--l. 163--><p class="indent">   Dans la suite de cet article sera pr&eacute;sent&eacute; un tel logiciel, <a 
  name="dx1-1001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>(§&nbsp;<a 
href="#x1-20002">2<!--tex4ht:ref: sec:logic-de-sauv--></a>),
suivi par la description de l'usage qui en est fait au Centre de Recherche en
Informatique (<a 
  name="dx1-1002"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small></span>) de l'&Eacute;cole Nationale Sup&eacute;rieure des Mines de Paris (<a 
  name="dx1-1003"></a><span 
class="eccc-1000"><small 
class="small-caps">E</small><small 
class="small-caps">N</small><small 
class="small-caps">S</small><small 
class="small-caps">M</small><small 
class="small-caps">P</small></span>) en
section&nbsp;<a 
href="#x1-260003">3<!--tex4ht:ref: sec:exemple-de-sauv--></a>.<a name="section.2"></a>
   <h3 class="sectionHead"><span class="titlemark">2</span> <a 
  name="x1-20002"></a>Logiciel de sauvegarde libre <span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span></h3>
<!--l. 173--><p class="noindent">Le logiciel <a 
  name="dx1-2001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>(<span 
class="ecti-1000">the Advanced Maryland Automatic Network Disk Archiver</span>) est
n&eacute; au d&eacute;but des ann&eacute;es 1990 des constatations pr&eacute;c&eacute;dentes afin de fournir une
solution satisfaisante &agrave; la probl&eacute;matique des sauvegardes <span class="cite">[<a 
href="#XWWW-amanda">AMA</a>]</span>.
<a name="subsection.2.1"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.1</span> <a 
  name="x1-30002.1"></a>Concepts</h4>
<a name="subsubsection.2.1.1"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.1 </span> <a 
  name="x1-40002.1.1"></a>Architecture client-serveur</h5>
<!--l. 186--><p class="noindent">Le principe est classique, bas&eacute; sur une architecture client-serveur sur un r&eacute;seau
<span class="cite">[<a 
href="#Xjackson99-amanda">JO99</a>]</span>&nbsp;:
     <ul class="itemize1">
     <li class="itemize">une  machine  ma&icirc;tre  contr&ocirc;le  typiquement  un  d&eacute;rouleur  de  bande  et
     va  superviser  un  ensemble  de  clients  dont  les  disques  doivent  &ecirc;tre
                                                                  

                                                                  
     sauvegard&eacute;s<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">des machines clientes envoient &agrave; la demande du ma&icirc;tre la taille ou le
     contenu de ce qu'elles doivent sauvegarder.</li></ul>
<!--l. 195--><p class="noindent">Pour des raisons de portabilit&eacute;, ce sont les outils classiques natifs ou libres de
sauvegardes de bas niveau des disques des clients qui sont utilis&eacute;s, <a 
  name="dx1-4001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>se
chargeant de jouer le chef d'orchestre en organisant tous les transferts de
flux.
<!--l. 200--><p class="indent">   En particulier le m&eacute;lange de sauvegardes compl&egrave;tes (de &#171; niveau 0 &#187;) et de
sauvegardes incr&eacute;mentales (on ne sauvegarde pour une partition que les donn&eacute;es qui
ont chang&eacute; depuis la derni&egrave;re sauvegarde de niveau inf&eacute;rieur) est g&eacute;r&eacute; par
<a 
  name="dx1-4002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>.<a name="subsubsection.2.1.2"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.2 </span> <a 
  name="x1-50002.1.2"></a>Disques tampons (<span 
class="ecti-1000">holding disks</span>)</h5>
<!--l. 209--><p class="noindent">Le probl&egrave;me lorsqu'on fait une sauvegarde en r&eacute;seau est qu'on n'a pas un d&eacute;bit
constant compatible avec la vitesse d'&eacute;criture sur bande. Si des donn&eacute;es
arrivent trop tard, le d&eacute;rouleur est oblig&eacute; de s'arr&ecirc;ter. Pour reprendre son
enregistrement, il se repositionne en g&eacute;n&eacute;ral sur la fin de l'enregistrement
pr&eacute;c&eacute;dent qu'il a d&eacute;pass&eacute; dans son &eacute;lan. Si cette op&eacute;ration a lieu souvent, le
d&eacute;bit pratique du d&eacute;rouleur va &ecirc;tre extr&ecirc;mement faible par rapport au d&eacute;bit
th&eacute;orique.
<!--l. 217--><p class="indent">   Pour cette raison, la sauvegarde est effectu&eacute;e en passant par un disque ou
plusieurs disques locaux au d&eacute;rouleur de bande et ce n'est que lorsque ces disques,
d&eacute;nomm&eacute;s <span 
class="ecti-1000">holding disks </span>(disques tampons) dans <a 
  name="dx1-5001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>, sont suffisamment remplis
que l'&eacute;criture a lieu sur bande. Ce m&eacute;canisme n'est pas indispensable mais le temps
gagn&eacute; vaut l'investissement en disque local. Leur prix ne fait que baisser de toute
mani&egrave;re. Comme il y a en g&eacute;n&eacute;ral beaucoup de sauvegardes incr&eacute;mentales contenant
souvent peu de donn&eacute;es, le gain est important m&ecirc;me avec un petit disque
tampon.
<!--l. 226--><p class="indent">   L'int&eacute;r&ecirc;t suppl&eacute;mentaire de ce syst&egrave;me est que plusieurs instances de sauvegardes
sur les clients via le r&eacute;seau vont &ecirc;tre lanc&eacute;es en parall&egrave;le pour maximiser l'usage du
r&eacute;seau.
<!--l. 230--><p class="indent">   En cas de probl&egrave;me lors de l'&eacute;criture sur la bande (pas la bonne bande, &eacute;criture
qui ne marche plus ou plus simplement la bande n'est pas assez grande pour contenir
tout ce qui doit &ecirc;tre sauvegard&eacute;) la sauvegarde continue en mode d&eacute;grad&eacute; (avec
seulement des sauvegardes incr&eacute;mentales des partitions et par ordre de priorit&eacute;
d&eacute;croissante) jusqu'&agrave; remplir ces disques tampons.
<!--l. 237--><p class="indent">   Ensuite, ces informations seront &eacute;crites par l'administrateur sur une autre cassette
gr&acirc;ce &agrave; la commande <span 
class="ectt-1000">amflush</span>.
<a name="subsubsection.2.1.3"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.3 </span> <a 
  name="x1-60002.1.3"></a>Planification automatique des t&acirc;ches</h5>
<!--l. 244--><p class="noindent">Tout ceci semble compliqu&eacute; &agrave; param&eacute;trer. En fait, une caract&eacute;ristique unique
d'<a 
  name="dx1-6001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>parmi les logiciels de sauvegarde est que l'organisation de ces phases est
laiss&eacute;e &agrave; un planificateur qui &eacute;tablit le travail &agrave; faire en fonction d'un cahier des
charges donn&eacute; par l'administrateur.
<!--l. 249--><p class="indent">   Le cahier des charges repose sur plusieurs concepts&nbsp;:
     <dl class="description"><dt class="description">
<span 
class="ecbx-1000">le cycle de sauvegarde (</span><span 
class="ecbi-1000">cycle dump</span><span 
class="ecbx-1000">)</span> </dt><dd 
class="description">d&eacute;finit le nombre de jours maximal
                                                                  

                                                                  
     entre les sauvegardes compl&egrave;tes des partitions<span class="frenchb-thinspace"> </span>;
     </dd><dt class="description">
<span 
class="ecbx-1000">le nombre de cassettes</span> </dt><dd 
class="description">qui seront utilis&eacute;es pour faire les sauvegardes<span class="frenchb-thinspace"> </span>;
     </dd><dt class="description">
<span 
class="ecbx-1000">le d</span><span 
class="ecbx-1000">&eacute;bit r</span><span 
class="ecbx-1000">&eacute;seau</span> </dt><dd 
class="description">qui est autoris&eacute;<span class="frenchb-thinspace"> </span>;
     </dd><dt class="description">
<span 
class="ecbx-1000">le nombre de sauvegardeurs</span> </dt><dd 
class="description">maximal &agrave; faire tourner sur chaque client<span class="frenchb-thinspace"> </span>;
     </dd><dt class="description">
<span 
class="ecbx-1000">les priorit</span><span 
class="ecbx-1000">&eacute;s</span> </dt><dd 
class="description">entre les diff&eacute;rentes partitions.</dd></dl>
<a 
  name="dx1-6002"></a>
<!--l. 261--><p class="noindent"><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>garde des statistiques sur les performances des sauvegardes pass&eacute;es pour
optimiser au mieux l'usage de la bande passante et magn&eacute;tique en choisissant pour
chaque partition si ce sera une sauvegarde compl&egrave;te ou incr&eacute;mentale d'un certain
niveau qui sera effectu&eacute;e.
<!--l. 266--><p class="indent">   L'int&eacute;r&ecirc;t d'une telle approche est qu'on n'est plus dans la planification statique
d'antan&nbsp;: le lundi soir sauvegarde compl&egrave;te de <span 
class="ectt-1000">/usr/local </span>et incr&eacute;mentale de <span 
class="ectt-1000">/users</span>,
le vendredi soir sauvegarde compl&egrave;te de <span 
class="ectt-1000">/users </span>et incr&eacute;mentale de <span 
class="ectt-1000">/usr/local</span>,... qui
peut mener &agrave; des impossibilit&eacute;s par exemple pour faire loger de front des sauvegardes
compl&egrave;tes de partitions qui auraient subit le m&ecirc;me jour des modifications
importantes.
<!--l. 274--><p class="indent">   Tout ceci est automatis&eacute; par <a 
  name="dx1-6003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>mais on peut changer le comportement par
d&eacute;faut pour g&eacute;rer des cas particuliers comme&nbsp;:
     <ul class="itemize1">
     <li class="itemize">forcer une sauvegarde compl&egrave;te de certaines partitions par exemple pour
     stockage des cassettes ailleurs dans un lieu s&eacute;curis&eacute;<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">ne  faire  que  des  sauvegardes  incr&eacute;mentale  si  par  exemple  on  a  une
     sauvegarde  compl&egrave;te  par  ailleurs  ou  qu'on  peut  r&eacute;cup&eacute;rer  le  contenu
     original en r&eacute;installant le syst&egrave;me (le m&eacute;dium du syst&egrave;me d'exploitation
     faisant office de niveau 0)<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">ne faire que des sauvegardes compl&egrave;tes sur certaines partitions car c'est
     trop critique de faire des sauvegardes incr&eacute;mentales ou le contenu varie
     trop de toute mani&egrave;re (base de donn&eacute;es en production).</li></ul>
<!--l. 288--><p class="noindent">On comprend ais&eacute;ment l'utilit&eacute; du nombre de cassettes&nbsp;: si on fait une sauvegarde par
jour, cela repr&eacute;sente directement le nombre de jours que l'on peut r&eacute;cup&eacute;rer dans le
pass&eacute;.
<!--l. 292--><p class="indent">   Le cycle de sauvegarde est plus subtil&nbsp;:
     <ul class="itemize1">
     <li class="itemize">si on le choisit tr&egrave;s faible, les restaurations seront plus simples &agrave; faire,
     mais les bandes seront de taille cons&eacute;quente car des sauvegardes compl&egrave;tes
     seront souvent effectu&eacute;es, mettant la pression aussi sur le r&eacute;seau<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">si  on  choisit  un  cycle  important,  on  aura  beaucoup  de  sauvegardes
     incr&eacute;mentales  et  une  restauration  d'une  partition  qui  en  serait  au
     malheureux niveau 9 n&eacute;cessiterait la bagatelle de 10 lectures de cassettes
     des niveaux 0 &agrave; 9. Et si par exemple la cassette de niveau 0 est corrompue,
     il faudra relire en plus les 10 cassettes pr&eacute;c&eacute;dentes et on aura un &#171; trou
                                                                  

                                                                  
     &#187; d'une journ&eacute;e assez &eacute;loign&eacute; dans le temps et le propri&eacute;taire des donn&eacute;es
     aura plus de mal &agrave; se souvenir du travail &agrave; refaire. L'int&eacute;r&ecirc;t n&eacute;anmoins est
     de sauvegarder moins de donn&eacute;es via le r&eacute;seau et d'utiliser une d&eacute;rouleur
     de bande de plus faible capacit&eacute;, moins cher, avec des cassettes aussi moins
     ch&egrave;res.</li></ul>
<!--l. 309--><p class="noindent">Tout est donc dans le compromis. De toute mani&egrave;re, le cycle de sauvegarde est une limite
sup&eacute;rieure et <a 
  name="dx1-6004"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>choisira toujours s'il reste de la place sur bande de mettre plus
de sauvegardes compl&egrave;tes que pr&eacute;vues pour raccourcir le cycle des sauvegardes
compl&egrave;tes.
<!--l. 314--><p class="indent">   Le corollaire par rapport &agrave; un syst&egrave;me moins intelligent est que, puisque <a 
  name="dx1-6005"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>
exploite au maximum la bande, <a 
  name="dx1-6006"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>use aussi au maximum les d&eacute;rouleurs de
bande car chaque cassette est remplie &agrave; fond alors qu'avec une planification statique
on est oblig&eacute; de faire des hypoth&egrave;ses pessimistes sur ce qui peut loger et donc en
g&eacute;n&eacute;ral sous-remplir la bande...
<!--l. 321--><p class="indent">   Les cassettes sont recycl&eacute;es automatiquement par <a 
  name="dx1-6007"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>mais un syst&egrave;me de
v&eacute;rification du nom de la cassette lui interdit d'effacer une cassette qui doit encore
&ecirc;tre gard&eacute;e pour garantir le d&eacute;lai de stockage des sauvegardes demand&eacute;. Les
cassettes peuvent aussi &ecirc;tre marqu&eacute;es comme non recyclables (simplement) par
<a 
  name="dx1-6008"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>.
<!--l. 327--><p class="indent">   Le nommage et marquage des cassettes avant usage par <a 
  name="dx1-6009"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est fait via
<span 
class="ectt-1000">amlabel</span>.
<!--l. 330--><p class="indent">   Cela signifie qu'on ne peut pas mettre n'importe quelle cassette. Les messages de
fin de sauvegarde envoy&eacute;s par <a 
  name="dx1-6010"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>indiquent (outre tout ce qui a &eacute;t&eacute; fait, voir
§&nbsp;<a 
href="#x1-120002.2.1">2.2.1<!--tex4ht:ref: sec:courrier-de-fin--></a>) le nom de la cassette &agrave; utiliser pour la prochaine fois. Mais comme on peut
oublier, on a int&eacute;r&ecirc;t &agrave; lancer un <span 
class="ectt-1000">amcheck </span>quelques heures avant le lancement de la
sauvegarde qui v&eacute;rifiera que la bonne cassette est en place, ainsi que l'&eacute;tat des clients,
des droits,... Cela laissera le temps de mener quelques mesures correctives
&eacute;ventuelles.<a name="subsubsection.2.1.4"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.4 </span> <a 
  name="x1-70002.1.4"></a>Compression des donn&eacute;es</h5>
<!--l. 343--><p class="noindent">Les d&eacute;rouleurs de bande modernes poss&egrave;dent un module de compression des donn&eacute;es
afin d'augmenter la capacit&eacute; apparente des bandes.
<!--l. 346--><p class="indent">   Mais <a 
  name="dx1-7001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est aussi capable de comprimer les donn&eacute;es au niveau de chaque
client, ce qui a plusieurs avantages&nbsp;:
     <ul class="itemize1">
     <li class="itemize">la  compression  logicielle  est  souvent  meilleure  en  terme  de  taux  de
     compression (<span 
class="ectt-1000">gzip</span>, <span 
class="ectt-1000">bzip2</span>,...) que celle effectu&eacute;e par le d&eacute;rouleur mais est
     aussi plus lente<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">seules les donn&eacute;es comprim&eacute;es passent sur le r&eacute;seau et donc la pression est
     moindre<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">lors de la planification <a 
  name="dx1-7002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>conna&icirc;t le taux de compression effectif
     pour chaque partition et peut mieux remplir les bandes avec moins de
     risque de d&eacute;bordement.</li></ul>
<!--l. 359--><p class="noindent">Comme la compression est parall&eacute;lis&eacute;e sur tous les clients le d&eacute;bit reste cons&eacute;quent.
N&eacute;anmoins, si on a certaines machines pas tr&egrave;s puissantes, on peut marquer les
partitions de celles-ci comme devant &ecirc;tre comprim&eacute;es par le d&eacute;rouleur et non
<a 
  name="dx1-7003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>.
                                                                  

                                                                  
<!--l. 365--><p class="indent">   Un point subtil est que si on demande la compression mat&eacute;rielle du d&eacute;rouleur de
bande, elle sera aussi appliqu&eacute;e aux partitions d&eacute;j&agrave; comprim&eacute;es logiciellement. Or il
est peu probable que la compression mat&eacute;rielle suppl&eacute;mentaire arrive &agrave; en comprimer
quelque chose mais il restera le surco&ucirc;t des ent&ecirc;tes de compression. Du coup la
capacit&eacute; apparente de la bande diminuera un peu...
<a name="subsubsection.2.1.5"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.5 </span> <a 
  name="x1-80002.1.5"></a>Formats de sauvegarde</h5>
<a 
  name="dx1-8001"></a>
<!--l. 377--><p class="noindent"><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>utilise les outils disponibles sur les clients pour faire des images de
sauvegarde et ces images sont mises par le serveur dans un format tr&egrave;s simple
(§&nbsp;<a 
href="#x1-190002.3.2">2.3.2<!--tex4ht:ref: sec:recup-part-de--></a>).
<!--l. 381--><p class="indent">   Mais il faut choisir pour chaque partition quel va &ecirc;tre l'outil utilis&eacute;, typiquement
<a 
  name="dx1-8002"></a><span 
class="eccc-1000"><small 
class="small-caps">G</small><small 
class="small-caps">N</small><small 
class="small-caps">U</small> </span><span 
class="ectt-1000">tar </span>ou un outil plus proche du syst&egrave;me de fichier, <span 
class="ectt-1000">dump</span>. Rapidement, les
avantages et inconv&eacute;nients de chaque approche&nbsp;:
     <dl class="description"><dt class="description">
<span 
class="ectt-1000">dump</span>&nbsp;<span 
class="ecbx-1000">:</span> </dt><dd 
class="description">&nbsp;
       <ul class="itemize1">
       <li class="itemize">sp&eacute;cifique &agrave; un syst&egrave;me de fichiers, voire &agrave; un syst&egrave;me d'exploitation.
       G&ecirc;nant pour faire des sauvegardes portables et &eacute;ternelles<span class="frenchb-thinspace"> </span>;
       </li>
       <li class="itemize">mode de restauration interactive<span class="frenchb-thinspace"> </span>;
       </li>
       <li class="itemize">ne change pas les dates des fichiers<span class="frenchb-thinspace"> </span>;</li></ul>
     </dd><dt class="description">
<span 
class="ectt-1000">tar</span>&nbsp;<span 
class="ecbx-1000">:</span> </dt><dd 
class="description">&nbsp;
       <ul class="itemize1">
       <li class="itemize">format portable, document&eacute;, logiciel libre. On pourra relire (si les bandes
       ne sont pas endommag&eacute;es et qu'il reste un lecteur en &eacute;tat de marche...)
       les sauvegardes sur une autre machine<span class="frenchb-thinspace"> </span>;
       </li>
       <li class="itemize">pas de conflit sur le fichier de gestion incr&eacute;mentale des sauvegardes.
       Permet facilement de m&eacute;langer plusieurs instances d'<a 
  name="dx1-8003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>(archivage
       + sauvegardes)<span class="frenchb-thinspace"> </span>;
       </li>
       <li class="itemize">modifie la date d'acc&egrave;s des fichiers. On peut n&eacute;anmoins contourner le
       probl&egrave;me en cr&eacute;ant avant une sauvegarde un &#171; instantan&eacute; &#187; (<span 
class="ecti-1000">snapshot</span>)
       de la partition si le syst&egrave;me le permet (ce qui a d'autres avantages en
       donnant une vue stable et coh&eacute;rente du syst&egrave;me de fichiers pendant
       toute  la  dur&eacute;e  de  la  sauvegarde),  comme  par  exemple  <span 
class="ectt-1000">fssnap  </span>sous
       <a 
  name="dx1-8004"></a><span 
class="eccc-1000">S<small 
class="small-caps">O</small><small 
class="small-caps">L</small><small 
class="small-caps">A</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small><small 
class="small-caps">S</small> </span>ou remonter la partition en lecture seule ailleurs si le syst&egrave;me
       le permet.</li></ul>
     </dd></dl>
<a name="subsubsection.2.1.6"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.6 </span> <a 
  name="x1-90002.1.6"></a>Changeur de bandes</h5>
<a 
  name="dx1-9001"></a>
<!--l. 416--><p class="noindent"><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>ne peut contr&ocirc;ler qu'un d&eacute;rouleur de bande mais celui-ci peut avoir un
syst&egrave;me de chargement automatique.
                                                                  

                                                                  
<!--l. 419--><p class="indent">   L'int&eacute;r&ecirc;t primordial est l'automatisation compl&egrave;te de la sauvegarde et la
possibilit&eacute; de remplir plusieurs bandes par sauvegarde.
<!--l. 422--><p class="indent">   Mais cela a d'autres effets de bord qui se traduisent par une quasi disparition des
probl&egrave;mes d'&eacute;criture et donc de l'emploi de la commande <span 
class="ectt-1000">amflush</span>. En effet, si
<a 
  name="dx1-9002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>n'a exceptionnellement plus de place pour &eacute;crire sur la bande (une ou
des partitions ont &eacute;t&eacute; fortement modifi&eacute;es au cours de la sauvegarde) ou
qu'il y a un probl&egrave;me en &eacute;criture la bande est d&eacute;charg&eacute;e et la suivante est
utilis&eacute;e.
<!--l. 429--><p class="indent">   L'inconv&eacute;nient n&eacute;anmoins d'un changeur de bande est que si la pi&egrave;ce qui le
contient br&ucirc;le, toutes les cassettes dedans disparaissent alors que si on n'en a pas,
comme on se d&eacute;place pour changer les cassettes on peut plus naturellement les
entreposer dans des lieux distants et diff&eacute;rents.
<a 
  name="dx1-9003"></a>
<!--l. 434--><p class="indent">   <span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>vient avec 4 syst&egrave;mes de contr&ocirc;le de changement de bandes, dont un
sp&eacute;cial puisqu'il se contente de demander &agrave; un humain de changer la bande quand
c'est n&eacute;cessaire...<a name="subsubsection.2.1.7"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.7 </span> <a 
  name="x1-100002.1.7"></a>Configuration</h5>
<!--l. 442--><p class="noindent">Dans la pure tradition unixienne, tout est fait avec des fichiers textes.
<!--l. 444--><p class="indent">   La configuration est tellement simple qu'il n'y a pas d'interface graphique de
configuration ou de contr&ocirc;le. Le rajout d'un disque de machine &agrave; sauvegarder se
traduit par une ligne &agrave; rajouter dans un fichier <span 
class="ectt-1000">disklist </span>central (voir la
section&nbsp;<a 
href="#x1-330003.3.2">3.3.2<!--tex4ht:ref: sec:liste-des-partitions--></a>).
<a name="subsection.2.2"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.2</span> <a 
  name="x1-110002.2"></a>Suivi des op&eacute;rations</h4>
<a name="subsubsection.2.2.1"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1 </span> <a 
  name="x1-120002.2.1"></a>Courriers de fin de sauvegarde</h5>
<!--l. 458--><p class="noindent">Apr&egrave;s chaque sauvegarde les administrateurs re&ccedil;oivent un r&eacute;sum&eacute; complet des
op&eacute;rations tel que&nbsp;:
     <ul class="itemize1">
     <li class="itemize">le nom de la configuration, de la cassette utilis&eacute;e et de celle qui sera utilis&eacute;e
     la prochaine fois&nbsp;:
    
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">From:</span>&nbsp;<span 
class="ectt-0800--87">bin@cri.ensmp.fr</span>
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">Subject:</span>&nbsp;<span 
class="ectt-0800--87">chailly99_jour</span>&nbsp;<span 
class="ectt-0800--87">AMANDA</span>&nbsp;<span 
class="ectt-0800--87">MAIL</span>&nbsp;<span 
class="ectt-0800--87">REPORT</span>&nbsp;<span 
class="ectt-0800--87">FOR</span>&nbsp;<span 
class="ectt-0800--87">September</span>&nbsp;<span 
class="ectt-0800--87">26,</span>&nbsp;<span 
class="ectt-0800--87">2001</span>
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">To:</span>&nbsp;<span 
class="ectt-0800--87">sauvegardes-amanda-chailly99@cri.ensmp.fr</span>
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">Date:</span>&nbsp;<span 
class="ectt-0800--87">Thu,</span>&nbsp;<span 
class="ectt-0800--87">27</span>&nbsp;<span 
class="ectt-0800--87">Sep</span>&nbsp;<span 
class="ectt-0800--87">2001</span>&nbsp;<span 
class="ectt-0800--87">00:52:35</span>&nbsp;<span 
class="ectt-0800--87">+0200</span>&nbsp;<span 
class="ectt-0800--87">(MEST)</span>
     <!--l. 472--><p class="noindent">
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">These</span>&nbsp;<span 
class="ectt-0800--87">dumps</span>&nbsp;<span 
class="ectt-0800--87">were</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-25@25-05-2000.</span>
     <!--l. 472--><p class="noindent"><span 
class="ectt-0800--87">Tonight's</span>&nbsp;<span 
class="ectt-0800--87">dumps</span>&nbsp;<span 
class="ectt-0800--87">should</span>&nbsp;<span 
class="ectt-0800--87">go</span>&nbsp;<span 
class="ectt-0800--87">onto</span>&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">tape:</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-26@13-11-2000.</span>
     </li>
     <li class="itemize">des statistiques sur ce qui a &eacute;t&eacute; fait&nbsp;:
    
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">STATISTICS:</span>
     <!--l. 487--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">Total</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">Full</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">Daily</span>
     <!--l. 487--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Dump</span>&nbsp;<span 
class="ectt-0800--87">Time</span>&nbsp;<span 
class="ectt-0800--87">(hrs:min)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1:43</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:22</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:05</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">(0:10</span>&nbsp;<span 
class="ectt-0800--87">start,</span>&nbsp;<span 
class="ectt-0800--87">1:05</span>&nbsp;<span 
class="ectt-0800--87">idle)</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Output</span>&nbsp;<span 
class="ectt-0800--87">Size</span>&nbsp;<span 
class="ectt-0800--87">(meg)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">4386.2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">3673.8</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">712.4</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Original</span>&nbsp;<span 
class="ectt-0800--87">Size</span>&nbsp;<span 
class="ectt-0800--87">(meg)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">10687.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">9067.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1620.0</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Avg</span>&nbsp;<span 
class="ectt-0800--87">Compressed</span>&nbsp;<span 
class="ectt-0800--87">Size</span>&nbsp;<span 
class="ectt-0800--87">(%)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">35.2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">42.5</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Tape</span>&nbsp;<span 
class="ectt-0800--87">Used</span>&nbsp;<span 
class="ectt-0800--87">(%)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">21.9</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">18.4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">3.6</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">(level:#disks</span>&nbsp;<span 
class="ectt-0800--87">...)</span>
                                                                  

                                                                  
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Filesystems</span>&nbsp;<span 
class="ectt-0800--87">Dumped</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">48</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">7</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">41</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">(1:39</span>&nbsp;<span 
class="ectt-0800--87">2:2)</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Avg</span>&nbsp;<span 
class="ectt-0800--87">Dump</span>&nbsp;<span 
class="ectt-0800--87">Rate</span>&nbsp;<span 
class="ectt-0800--87">(k/s)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">725.3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">783.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">524.3</span>
     <!--l. 487--><p class="noindent"><span 
class="ectt-0800--87">Avg</span>&nbsp;<span 
class="ectt-0800--87">Tp</span>&nbsp;<span 
class="ectt-0800--87">Write</span>&nbsp;<span 
class="ectt-0800--87">Rate</span>&nbsp;<span 
class="ectt-0800--87">(k/s)</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">2769.1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2906.6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2226.1</span>
     <!--l. 488--><p class="noindent">48 partitions ont &eacute;t&eacute; sauvegard&eacute;es dont 7 compl&egrave;tement et 41 en incr&eacute;mental, la
     compression logicielle par classe (apr&egrave;s compression logicielle il reste ici
     35,2 % de la taille d'origine), on voit qu'on passe surtout du temps &agrave;
     attendre les donn&eacute;es (1h05) ce qui s'explique par la limite demand&eacute;e
     dans l'occupation r&eacute;seau par rapport &agrave; ce que permet le d&eacute;rouleur de
     bande<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">des informations sur la planification du point de vue client et du point de vue
     serveur&nbsp;:
    
     <!--l. 503--><p class="noindent"><span 
class="ectt-0800--87">NOTES:</span>
     <!--l. 503--><p class="noindent">&nbsp;&nbsp;<span 
class="ectt-0800--87">planner:</span>&nbsp;<span 
class="ectt-0800--87">Incremental</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">orgenoy:c0t0d0s4</span>&nbsp;<span 
class="ectt-0800--87">bumped</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">level</span>&nbsp;<span 
class="ectt-0800--87">2.</span>
     <!--l. 503--><p class="noindent">&nbsp;&nbsp;<span 
class="ectt-0800--87">planner:</span>&nbsp;<span 
class="ectt-0800--87">Incremental</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">chailly99:c1t3d0s0</span>&nbsp;<span 
class="ectt-0800--87">bumped</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">level</span>&nbsp;<span 
class="ectt-0800--87">2.</span>
     <!--l. 503--><p class="noindent">&nbsp;&nbsp;<span 
class="ectt-0800--87">taper:</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-25@25-05-2000</span>&nbsp;<span 
class="ectt-0800--87">kb</span>&nbsp;<span 
class="ectt-0800--87">4493024</span>&nbsp;<span 
class="ectt-0800--87">fm</span>&nbsp;<span 
class="ectt-0800--87">48</span>&nbsp;<span 
class="ectt-0800--87">[OK]</span>
     </li>
     <li class="itemize">et enfin les m&ecirc;mes informations en d&eacute;tail partition par partition&nbsp;:
    
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">DUMP</span>&nbsp;<span 
class="ectt-0800--87">SUMMARY:</span>
     <!--l. 516--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DUMPER</span>&nbsp;<span 
class="ectt-0800--87">STATS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">TAPER</span>&nbsp;<span 
class="ectt-0800--87">STATS</span>
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">HOSTNAME</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">DISK</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">L</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">ORIG-KB</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">OUT-KB</span>&nbsp;<span 
class="ectt-0800--87">COMP%</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">MMM:SS</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">KB/s</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">MMM:SS</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">KB/s</span>
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;</span>&nbsp;<span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;</span>&nbsp;<span 
class="ectt-0800--87">&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;&#8211;</span>
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">abisko</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">6079</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">928</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">15.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:06</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">158.6</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;<span 
class="ectt-0800--87">1064.4</span>
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">abisko</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">2946207</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1216800</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">41.3</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">23:30</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">863.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">6:53</span>&nbsp;<span 
class="ectt-0800--87">2944.7</span>
     <!--l. 516--><p class="noindent"><span 
class="ectt-0800--87">blonville</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5760</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:22</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">261.5</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:04</span>&nbsp;<span 
class="ectt-0800--87">1533.4</span>
    
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">191</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">16.8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:03</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">9.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">86.8</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">543</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">64</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">11.8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:04</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">18.0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">117.0</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:24</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">29.8</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">53567</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">10080</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">18.8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:41</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">245.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:09</span>&nbsp;<span 
class="ectt-0800--87">1187.4</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t1d0s3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">538015</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">247904</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">46.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">4:43</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">876.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1:28</span>&nbsp;<span 
class="ectt-0800--87">2823.3</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t1d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">63</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">50.8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">13.6</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.7</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">27.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.1</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">28.4</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">76.2</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s7</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">22.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.6</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">573791</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">222432</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">38.8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">4:50</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">767.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1:20</span>&nbsp;<span 
class="ectt-0800--87">2796.5</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">28.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.7</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">26.6</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.7</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">33.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">20.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.6</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">351</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">9.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:05</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">7.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:05</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">11.8</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">703</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">64</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">9.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2:19</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0.5</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">46.3</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">319</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10.0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1:22</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0.4</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:06</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">11.1</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s3</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">159</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">20.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">18.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.8</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">438047</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">254848</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">58.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">4:54</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">867.9</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1:30</span>&nbsp;<span 
class="ectt-0800--87">2826.8</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">7103</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1504</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">21.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:42</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">36.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:06</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">265.7</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">292831</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">114912</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">39.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2:15</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">849.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:45</span>&nbsp;<span 
class="ectt-0800--87">2531.4</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s7</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">159</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">32</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">20.1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:02</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">16.6</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">78.7</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">9151</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1344</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">14.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:07</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">203.5</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:07</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">186.6</span>
     <!--l. 542--><p class="noindent"><span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">17695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">6304</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">35.6</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:17</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">368.0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:04</span>&nbsp;<span 
class="ectt-0800--87">1653.2</span>
    
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">[...]</span>
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">thomery</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5952</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5952</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:09</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">680.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:03</span>&nbsp;<span 
class="ectt-0800--87">1861.9</span>
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">thomery</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">3072</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">3072</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:10</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">302.4</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:01</span>&nbsp;<span 
class="ectt-0800--87">2562.6</span>
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">viroflay</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s6</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5856</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5856</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:20</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">299.3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:04</span>&nbsp;<span 
class="ectt-0800--87">1558.7</span>
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">vulaines</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">14816</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">14816</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:12</span>&nbsp;<span 
class="ectt-0800--87">1194.2</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0:05</span>&nbsp;<span 
class="ectt-0800--87">2858.4</span>
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">vulaines</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">0</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">951744</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">951744</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">&#8211;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">6:32</span>&nbsp;<span 
class="ectt-0800--87">2427.7</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">5:25</span>&nbsp;<span 
class="ectt-0800--87">2928.0</span>
     <!--l. 553--><p class="noindent">
     <!--l. 553--><p class="noindent"><span 
class="ectt-0800--87">(brought</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">you</span>&nbsp;<span 
class="ectt-0800--87">by</span>&nbsp;<span 
class="ectt-0800--87">Amanda</span>&nbsp;<span 
class="ectt-0800--87">version</span>&nbsp;<span 
class="ectt-0800--87">2.4.1p1)</span>
                                                                  

                                                                  
     <!--l. 554--><p class="noindent">on peut remarquer qu'un m&eacute;lange de sauvegardes compl&egrave;tes (niveau 0) et
     incr&eacute;mentales (niveaux 1 et 2) ont &eacute;t&eacute; utilis&eacute;es et que les derni&egrave;res machines
     n'utilisent pas la compression logicielle.</li></ul>
<a name="subsubsection.2.2.2"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.2 </span> <a 
  name="x1-130002.2.2"></a>Commandes d'information</h5>
<!--l. 563--><p class="noindent">La commande <span 
class="ectt-1000">amstatus </span>donne de l'information similaire sur une sauvegarde en
cours ou sur une sauvegarde pass&eacute;e. Cela permet d'ajuster les param&egrave;tres si
on a besoin d'acc&eacute;l&eacute;rer les sauvegardes en jouant par exemple sur certains
param&egrave;tres&nbsp;:
     <ul class="itemize1">
     <li class="itemize">autoriser plus de bande passante r&eacute;seau<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">rajouter des disques tampons<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">lancer  plus  de  sauvegardeurs  par  client  en  parall&egrave;le  en  pr&eacute;cisant  les
     partitions qui ne sont pas sur le m&ecirc;me disque pour &eacute;viter de perdre du
     temps &agrave; bouger les t&ecirc;tes.</li></ul>
<!--l. 575--><p class="noindent"><hr class="figure"><div align="center" class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                  

                                                                  
<a 
  name="x1-130001"></a>
                                                                  

                                                                  
<!--l. 576--><p class="indent">   <img 
src="article0x.gif" alt="PIC" class="graphics"  ><!--tex4ht:graphics  
name="article0x.gif" src="images/20010928.ps"  
-->
<br> <div align="center" class="caption"><table class="caption" 
><tr valign="baseline" class="caption"><td class="id"><span 
class="eccc-1000">F<small 
class="small-caps">I</small><small 
class="small-caps">G</small>.</span>&nbsp;1: </td><td  
class="content">Exemple de rendu du fonctionnement avec <span 
class="ectt-1000">amplot</span>.</td></tr></table></div><!--tex4ht:label?: x1-130001-->
                                                                  

                                                                  
   </td></tr></table></div><hr class="endfigure">
<!--l. 581--><p class="indent">   Cette information peut &ecirc;tre repr&eacute;sent&eacute;e de mani&egrave;re graphique gr&acirc;ce &agrave; la
commande <span 
class="ectt-1000">amplot </span>qui utilise <span 
class="ectt-1000">gnuplot </span>pour afficher les donn&eacute;es comme sur la
figure&nbsp;<a 
href="#x1-130001">1<!--tex4ht:ref: fig:amplot--></a>.
<a name="subsubsection.2.2.3"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.3 </span> <a 
  name="x1-140002.2.3"></a>V&eacute;rification des sauvegardes</h5>
<!--l. 589--><p class="noindent">Rien ne sert de faire des sauvegardes si on ne peut pas relire les informations. Il faut
donc v&eacute;rifier le fonctionnement correct du syst&egrave;me r&eacute;guli&egrave;rement.
<a 
  name="dx1-14001"></a>
<!--l. 593--><p class="indent">   <span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>fournit l'outil <span 
class="ectt-1000">amverify </span>qui v&eacute;rifie s'il peut bien comprendre les archives
de la bande si elles ont &eacute;t&eacute; faites par un outil libre (typiquement <span 
class="ectt-1000">tar</span>) mais
pas si elle ont &eacute;t&eacute; faite avec un outil propri&eacute;taire d'un client qui n'est pas
disponible sur le serveur. Dans ce dernier cas, seule une v&eacute;rification de lecture est
effectu&eacute;e.
<!--l. 599--><p class="indent">   Une v&eacute;rification plus rapide mais moins pr&eacute;cise est de lancer une restauration
d'une partition qui n'existe pas&nbsp;: dans ce cas <span 
class="ectt-1000">amrestore </span>va lire tous les ent&ecirc;tes
<a 
  name="dx1-14002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>de la bande jusqu'&agrave; la fin et les afficher.
<!--l. 604--><p class="indent">   Les d&eacute;rouleurs de bande ont la r&eacute;putation de pouvoir relire plus facilement les
donn&eacute;es qu'ils ont &eacute;crites que celles &eacute;crites par d'autres appareils. Ce qui peut &ecirc;tre
f&acirc;cheux en cas de panne d&eacute;finitive du d&eacute;rouleur de bande&nbsp;: on aura perdu le rare
appareil capable de relire les sauvegardes... Afin d'&eacute;viter ce cas pathologique
il faut faire les v&eacute;rifications de lecture avec un autre d&eacute;rouleur, m&ecirc;me si
c'est impossible &agrave; automatiser si on ne dispose pas d'un automate &agrave; double
d&eacute;rouleur.
<!--l. 612--><p class="indent">   L'effet de bord ennuyeux de ces v&eacute;rifications syst&eacute;matiques est que l'on double
l'utilisation du d&eacute;rouleur et donc qu'on diminue sa dur&eacute;e de vie, d&eacute;j&agrave; pas tr&egrave;s &eacute;lev&eacute;e
mais de toute mani&egrave;re c'est le genre de mat&eacute;riel qu'il faut avoir en double pour
assurer une bonne continuit&eacute; de service.<a name="subsection.2.3"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.3</span> <a 
  name="x1-150002.3"></a>Restauration de donn&eacute;es</h4><a name="subsubsection.2.3.1"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.1 </span> <a 
  name="x1-160002.3.1"></a>Fonctionnement standard</h5><a name="paragraph.2.3.1.1"></a>
<!--l. 626--><p class="noindent"><span class="paragraphHead"><a 
  name="x1-170002.3.1.1"></a><span 
class="ecbx-1000">En utilisant les index</span></span>
   Si les index sont utilis&eacute;s, la commande de restauration &agrave; utiliser sur le client en
tant que <span 
class="ectt-1000">root </span>est <span 
class="ectt-1000">amrecover </span>qui a une syntaxe &agrave; la <span 
class="ectt-1000">ftp</span>&nbsp;:

<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">orgenoy-root</span>&nbsp;<span 
class="ectt-0800--87">&gt;</span>&nbsp;<span 
class="ectt-0800--87">amrecover</span>&nbsp;<span 
class="ectt-0800--87">chailly99_jour</span>&nbsp;<span 
class="ectt-0800--87">-s</span>&nbsp;<span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">-t</span>&nbsp;<span 
class="ectt-0800--87">chailly99</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">AMRECOVER</span>&nbsp;<span 
class="ectt-0800--87">Version</span>&nbsp;<span 
class="ectt-0800--87">2.4.1p1.</span>&nbsp;<span 
class="ectt-0800--87">Contacting</span>&nbsp;<span 
class="ectt-0800--87">server</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">...</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">220</span>&nbsp;<span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">AMANDA</span>&nbsp;<span 
class="ectt-0800--87">index</span>&nbsp;<span 
class="ectt-0800--87">server</span>&nbsp;<span 
class="ectt-0800--87">(2.4.1p1)</span>&nbsp;<span 
class="ectt-0800--87">ready.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">200</span>&nbsp;<span 
class="ectt-0800--87">Access</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Setting</span>&nbsp;<span 
class="ectt-0800--87">restore</span>&nbsp;<span 
class="ectt-0800--87">date</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">today</span>&nbsp;<span 
class="ectt-0800--87">(2001-10-02)</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">200</span>&nbsp;<span 
class="ectt-0800--87">Working</span>&nbsp;<span 
class="ectt-0800--87">date</span>&nbsp;<span 
class="ectt-0800--87">set</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">2001-10-02.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">200</span>&nbsp;<span 
class="ectt-0800--87">Config</span>&nbsp;<span 
class="ectt-0800--87">set</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">chailly99_jour.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">200</span>&nbsp;<span 
class="ectt-0800--87">Dump</span>&nbsp;<span 
class="ectt-0800--87">host</span>&nbsp;<span 
class="ectt-0800--87">set</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">orgenoy.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">$CWD</span>&nbsp;<span 
class="ectt-0800--87">'/export/interne'</span>&nbsp;<span 
class="ectt-0800--87">is</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">disk</span>&nbsp;<span 
class="ectt-0800--87">'c0t0d0s7'</span>&nbsp;<span 
class="ectt-0800--87">mounted</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">'/export/interne'.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">200</span>&nbsp;<span 
class="ectt-0800--87">Disk</span>&nbsp;<span 
class="ectt-0800--87">set</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s7.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">/export/interne</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">amrecover&gt;</span>&nbsp;<span 
class="ectt-0800--87">ls</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-09-27</span>&nbsp;<span 
class="ectt-0800--87">lost+found/</span>
                                                                  

                                                                  
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">save_system/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">amrecover&gt;</span>&nbsp;<span 
class="ectt-0800--87">cd</span>&nbsp;<span 
class="ectt-0800--87">save_system/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">/export/interne/save_system</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">amrecover&gt;</span>&nbsp;<span 
class="ectt-0800--87">ls</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">jumpstart/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-09-27</span>&nbsp;<span 
class="ectt-0800--87">modeles/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">2001-09-27</span>&nbsp;<span 
class="ectt-0800--87">root/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">amrecover&gt;</span>&nbsp;<span 
class="ectt-0800--87">add</span>&nbsp;<span 
class="ectt-0800--87">jumpstart/</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Added</span>&nbsp;<span 
class="ectt-0800--87">dir</span>&nbsp;<span 
class="ectt-0800--87">/save_system/jumpstart</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">date</span>&nbsp;<span 
class="ectt-0800--87">2001-10-01</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Added</span>&nbsp;<span 
class="ectt-0800--87">dir</span>&nbsp;<span 
class="ectt-0800--87">/save_system/jumpstart</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">date</span>&nbsp;<span 
class="ectt-0800--87">2001-09-27</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">amrecover&gt;</span>&nbsp;<span 
class="ectt-0800--87">extract</span>
<!--l. 667--><p class="noindent">
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Extracting</span>&nbsp;<span 
class="ectt-0800--87">files</span>&nbsp;<span 
class="ectt-0800--87">using</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">drive</span>&nbsp;<span 
class="ectt-0800--87">/dev/null</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">host</span>&nbsp;<span 
class="ectt-0800--87">chailly99.</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">The</span>&nbsp;<span 
class="ectt-0800--87">following</span>&nbsp;<span 
class="ectt-0800--87">tapes</span>&nbsp;<span 
class="ectt-0800--87">are</span>&nbsp;<span 
class="ectt-0800--87">needed:</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-26@13-11-2000</span>
<!--l. 667--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-27@30-05-2000</span>
<!--l. 667--><p class="noindent">
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Restoring</span>&nbsp;<span 
class="ectt-0800--87">files</span>&nbsp;<span 
class="ectt-0800--87">into</span>&nbsp;<span 
class="ectt-0800--87">directory</span>&nbsp;<span 
class="ectt-0800--87">/export/interne</span>
<!--l. 667--><p class="noindent"><span 
class="ectt-0800--87">Continue?</span>&nbsp;<span 
class="ectt-0800--87">[Y/n]:</span>
<!--l. 668--><p class="indent">   le syst&egrave;me demandant d'ins&eacute;rer &agrave; tour de r&ocirc;le les cassettes pour les niveaux
incr&eacute;mentaux si n&eacute;cessaire.
<!--l. 671--><p class="indent">   Les index sont tr&egrave;s orient&eacute;s date et cela pose probl&egrave;me en cas de restauration d'un
fichier qui a par exemple &eacute;t&eacute; perdu &agrave; une date inconnue. Une solution est de faire une
recherche dicotomique en faisant plusieurs r&eacute;glages de date &agrave; partir de la derni&egrave;re
date.
<!--l. 676--><p class="indent">   Mais comme les fichiers sont dans un format tr&egrave;s simple on peut faire un script de
recherche directement dans les index tri&eacute;s par date d&eacute;croissante.
<a name="paragraph.2.3.1.2"></a>
<!--l. 681--><p class="noindent"><span class="paragraphHead"><a 
  name="x1-180002.3.1.2"></a><span 
class="ecbx-1000">Sans utiliser les index</span></span>
   Une autre solution est de r&eacute;cup&eacute;rer directement le contenu de la partition et de
l'envoyer dans l'outil de restauration ad&eacute;quat&nbsp;:
     <ul class="itemize1">
     <li class="itemize">on commence par chercher la bande qui nous int&eacute;resse en interrogeant la
     base de donn&eacute;e sur le serveur avec
    
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">su</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">-c</span>&nbsp;<span 
class="ectt-0800--87">'amadmin</span>&nbsp;<span 
class="ectt-0800--87">chailly99_jour</span>&nbsp;<span 
class="ectt-0800--87">find</span>&nbsp;<span 
class="ectt-0800--87">champeaux'</span>
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">Scanning</span>&nbsp;<span 
class="ectt-0800--87">/home/chailly99/bibendum5/amanda/work/chailly99_jour...</span>
     <!--l. 698--><p class="noindent">
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">date</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">disk</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">lv</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">or</span>&nbsp;<span 
class="ectt-0800--87">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">file</span>&nbsp;<span 
class="ectt-0800--87">status</span>
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">2001-08-08</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-28@17-07-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">15</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">2001-08-09</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-29@31-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">26</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 698--><p class="noindent"><span 
class="ectt-0800--87">[...]</span>
    
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-25</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">0</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-24@24-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">29</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-26</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-25@25-05-2000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-27</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-26@13-11-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">14</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-27@30-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">10</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-08-08</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-28@17-07-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">12</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">[...]</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-24</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">0</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-23@10-07-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">47</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-25</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-24@24-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">37</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 710--><p class="noindent"><span 
class="ectt-0800--87">2001-09-26</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-25@25-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">12</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
    
     <!--l. 715--><p class="noindent"><span 
class="ectt-0800--87">2001-09-27</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-26@13-11-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">27</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     <!--l. 715--><p class="noindent"><span 
class="ectt-0800--87">2001-10-01</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">CHAILLY99-J-27@30-05-2000</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">31</span>&nbsp;<span 
class="ectt-0800--87">OK</span>
     </li>
     <li class="itemize">on ins&egrave;re la bonne bande et on r&eacute;cup&egrave;re depuis la machine <span 
class="ectt-1000">champeaux </span>par
                                                                  

                                                                  
     exemple avec&nbsp;:
    
     <!--l. 721--><p class="noindent"><span 
class="ectt-0800--87">ssh</span>&nbsp;<span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">amrestore</span>&nbsp;<span 
class="ectt-0800--87">-p</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">champeaux</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;<span 
class="ectt-0800--87">|</span>&nbsp;<span 
class="ectt-0800--87">ufsrestore</span>&nbsp;<span 
class="ectt-0800--87">-ivf</span>&nbsp;<span 
class="ectt-0800--87">-</span>
     </li></ul>
<a name="subsubsection.2.3.2"></a>
<!--l. 725--><p class="noindent">
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.2 </span> <a 
  name="x1-190002.3.2"></a>R&eacute;cup&eacute;ration &agrave; partir de rien</h5>
<!--l. 728--><p class="noindent">En cas de catastrophe, il est bien pratique de red&eacute;marrer sur un support qui aura
pour effet de r&eacute;installer le syst&egrave;me d'exploitation suivi par la r&eacute;cup&eacute;ration des disques
de donn&eacute;es.
<!--l. 732--><p class="indent">   Mais ce n'est pas pr&eacute;vu dans <a 
  name="dx1-19001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>, &eacute;tant donn&eacute; que cela implique d'&ecirc;tre tr&egrave;s
proche du syst&egrave;me d'exploitation.
<!--l. 735--><p class="indent">   N&eacute;anmoins, si on a correctement organis&eacute; son syst&egrave;me, on doit avoir au moins 2
serveurs d'installations (pour pouvoir les r&eacute;installer mutuellement l'un par rapport &agrave;
l'autre) et lancer une installation r&eacute;seau automatique qui fera tourner un syst&egrave;me
d'exploitation minimal pour permettre de recharger depuis le serveur <a 
  name="dx1-19002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>le
contenu des disques. En ce qui concerne le disque syst&egrave;me il ne faut pas
oublier de r&eacute;installer les m&eacute;ta-donn&eacute;es d'amor&ccedil;age (typiquement les blocs
d'amor&ccedil;age sur le disque syst&egrave;me principal) si on veut pouvoir red&eacute;marrer
ensuite.
<!--l. 744--><p class="indent">   Si on n'a pas de proc&eacute;dure d'installation en r&eacute;seau, on utilisera un <a 
  name="dx1-19003"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">D</small>-<small 
class="small-caps">R</small><small 
class="small-caps">O</small><small 
class="small-caps">M</small> </span>ou une
disquette de secours contenant les outils n&eacute;cessaires au formatage et &agrave; la restauration
des disques.
<!--l. 748--><p class="indent">   Si la machine serveuse <a 
  name="dx1-19004"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>n'est plus utilisable, rien n'emp&ecirc;che d'utiliser son
d&eacute;rouleur ou un autre sur une autre machine. Si on a acc&egrave;s aux fichiers de
configuration, d'information, voire m&ecirc;me d'index depuis cette machine, la
restauration sera luxueuse. D'o&ugrave; l'int&eacute;r&ecirc;t de r&eacute;pliquer automatiquement ces fichiers
via le r&eacute;seau.
<!--l. 754--><p class="indent">   Sinon, il faudra travailler &agrave; la main. Le format des bandes <a 
  name="dx1-19005"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est simple. Le
premier fichier donne le nom de la bande, comme&nbsp;:

<!--l. 759--><p class="noindent"><span 
class="ectt-0800--87">AMANDA:</span>&nbsp;<span 
class="ectt-0800--87">TAPESTART</span>&nbsp;<span 
class="ectt-0800--87">DATE</span>&nbsp;<span 
class="ectt-0800--87">20010808</span>&nbsp;<span 
class="ectt-0800--87">TAPE</span>&nbsp;<span 
class="ectt-0800--87">CRI-21@20-09-1999</span>
<!--l. 760--><p class="indent">   et les autres fichiers commencent par un ent&ecirc;te de 32&nbsp;Ko d&eacute;crivant son origine et
comment en extraire l'information, comme par exemple&nbsp;:

<!--l. 767--><p class="noindent"><span 
class="ectt-0800--87">AMANDA:</span>&nbsp;<span 
class="ectt-0800--87">FILE</span>&nbsp;<span 
class="ectt-0800--87">20010808</span>&nbsp;<span 
class="ectt-0800--87">deauville</span>&nbsp;<span 
class="ectt-0800--87">c0t2d0s4</span>&nbsp;<span 
class="ectt-0800--87">lev</span>&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">comp</span>&nbsp;<span 
class="ectt-0800--87">N</span>&nbsp;<span 
class="ectt-0800--87">program</span>&nbsp;<span 
class="ectt-0800--87">/usr/sbin/ufsdump</span>
<!--l. 767--><p class="noindent"><span 
class="ectt-0800--87">To</span>&nbsp;<span 
class="ectt-0800--87">restore,</span>&nbsp;<span 
class="ectt-0800--87">position</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">start</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">file</span>&nbsp;<span 
class="ectt-0800--87">and</span>&nbsp;<span 
class="ectt-0800--87">run:</span>
<!--l. 767--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">dd</span>&nbsp;<span 
class="ectt-0800--87">if=&lt;tape&gt;</span>&nbsp;<span 
class="ectt-0800--87">bs=32k</span>&nbsp;<span 
class="ectt-0800--87">skip=1</span>&nbsp;<span 
class="ectt-0800--87">|</span>&nbsp;<span 
class="ectt-0800--87">/usr/sbin/ufsrestore</span>&nbsp;<span 
class="ectt-0800--87">-f...</span>&nbsp;<span 
class="ectt-0800--87">-</span>
<!--l. 768--><p class="indent">   ou

<!--l. 773--><p class="noindent"><span 
class="ectt-0800--87">AMANDA:</span>&nbsp;<span 
class="ectt-0800--87">FILE</span>&nbsp;<span 
class="ectt-0800--87">20010809</span>&nbsp;<span 
class="ectt-0800--87">orgenoy</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;<span 
class="ectt-0800--87">lev</span>&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">comp</span>&nbsp;<span 
class="ectt-0800--87">.gz</span>&nbsp;<span 
class="ectt-0800--87">program</span>&nbsp;<span 
class="ectt-0800--87">/usr/sbin/ufsdump</span>
<!--l. 773--><p class="noindent"><span 
class="ectt-0800--87">To</span>&nbsp;<span 
class="ectt-0800--87">restore,</span>&nbsp;<span 
class="ectt-0800--87">position</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">start</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">file</span>&nbsp;<span 
class="ectt-0800--87">and</span>&nbsp;<span 
class="ectt-0800--87">run:</span>
<!--l. 773--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">dd</span>&nbsp;<span 
class="ectt-0800--87">if=&lt;tape&gt;</span>&nbsp;<span 
class="ectt-0800--87">bs=32k</span>&nbsp;<span 
class="ectt-0800--87">skip=1</span>&nbsp;<span 
class="ectt-0800--87">|</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/bin/gzip</span>&nbsp;<span 
class="ectt-0800--87">-dc</span>&nbsp;<span 
class="ectt-0800--87">|</span>&nbsp;<span 
class="ectt-0800--87">usr/sbin/ufsrestore</span>&nbsp;<span 
class="ectt-0800--87">-f...</span>&nbsp;<span 
class="ectt-0800--87">-</span>
<!--l. 774--><p class="indent">   On peut avoir facilement le contenu d'une bande par exemple avec&nbsp;:

                                                                  

                                                                  
<!--l. 778--><p class="noindent"><span 
class="ectt-0800--87">mt</span>&nbsp;<span 
class="ectt-0800--87">-f</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">rewind</span>
<!--l. 778--><p class="noindent"><span 
class="ectt-0800--87">while</span>&nbsp;<span 
class="ectt-0800--87">dd</span>&nbsp;<span 
class="ectt-0800--87">bs=32k</span>&nbsp;<span 
class="ectt-0800--87">count=1</span>&nbsp;<span 
class="ectt-0800--87">if=/dev/rmt/0hn;</span>&nbsp;<span 
class="ectt-0800--87">do</span>&nbsp;<span 
class="ectt-0800--87">echo;</span>&nbsp;<span 
class="ectt-0800--87">done;</span>
<a name="subsection.2.4"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.4</span> <a 
  name="x1-200002.4"></a>Sauvegardes sans clients Unix</h4>
<a name="subsubsection.2.4.1"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.1 </span> <a 
  name="x1-210002.4.1"></a>Sauvegardes de serveurs de fichiers</h5>
<!--l. 788--><p class="noindent">Certains syst&egrave;mes poss&egrave;dent des disques mais n'ont pas ou ne peuvent pas avoir de
client <a 
  name="dx1-21001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>parce qu'ils ne sont pas programmables, tels que les serveurs disques
propri&eacute;taires.
<!--l. 792--><p class="indent">   Dans ce cas il suffit d'exporter ces disques via un protocole quelconque vers une
machine cliente <a 
  name="dx1-21002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>qui effectuera la sauvegarde. Pour limiter le trafic r&eacute;seau, il
peut &ecirc;tre plus int&eacute;ressant de faire cette op&eacute;ration sur le serveur <a 
  name="dx1-21003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>
lui-m&ecirc;me.
<a name="subsubsection.2.4.2"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">2.4.2 </span> <a 
  name="x1-220002.4.2"></a>Sauvegardes de clients Windows</h5>
<!--l. 801--><p class="noindent">Le cas des machines Windows est une sp&eacute;cialisation du cas pr&eacute;c&eacute;dent puisque c'est le
protocole <a 
  name="dx1-22001"></a><span 
class="eccc-1000"><small 
class="small-caps">S</small><small 
class="small-caps">M</small><small 
class="small-caps">B</small> </span>avec <a 
  name="dx1-22002"></a><span 
class="eccc-1000"><small 
class="small-caps">S</small><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">B</small><small 
class="small-caps">A</small> </span>qui est utilis&eacute;.
<a 
  name="dx1-22003"></a>
<!--l. 804--><p class="indent">   <span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>utilise ce syst&egrave;me lorsqu'on met dans la liste des disques &agrave; sauvegarder
le nom de la machine cliente <a 
  name="dx1-22004"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>qui fait tourner <a 
  name="dx1-22005"></a><span 
class="eccc-1000"><small 
class="small-caps">S</small><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">B</small><small 
class="small-caps">A</small> </span>et comme disque le
nom de partage &agrave; la Windows du style <span 
class="ectt-1000">//</span><span 
class="ecit-1000">mon-pc </span><span 
class="ectt-1000">/C$</span>.
<!--l. 809--><p class="indent">   L'authentification est g&eacute;r&eacute;e en associant le mot de passe en clair (donc attention
aux droits du fichier...) &agrave; la partition dans le fichier <span 
class="ectt-1000">/etc/amandapass </span>de la machine
faisant tourner <a 
  name="dx1-22006"></a><span 
class="eccc-1000"><small 
class="small-caps">S</small><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">B</small><small 
class="small-caps">A</small></span>.
<!--l. 813--><p class="indent">   Une alternative existera n&eacute;anmoins puisque des clients <a 
  name="dx1-22007"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>natifs sont en
cours de d&eacute;veloppement, tel que <a 
href="http://sourceforge.net/projects/amanda-win32" ><span 
class="ectt-0900">http://sourceforge.net/projects/amanda-win32</span></a>.
<a name="subsection.2.5"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.5</span> <a 
  name="x1-230002.5"></a>Installation</h4>
<a 
  name="dx1-23001"></a>
<!--l. 821--><p class="noindent"><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>utilise ses propres protocoles au dessus d'<a 
  name="dx1-23002"></a><span 
class="eccc-1000"><small 
class="small-caps">U</small><small 
class="small-caps">D</small><small 
class="small-caps">P</small> </span>et <a 
  name="dx1-23003"></a><span 
class="eccc-1000"><small 
class="small-caps">T</small><small 
class="small-caps">C</small><small 
class="small-caps">P</small> </span>pour fonctionner &agrave;
partir du super d&eacute;mon de type <span 
class="ectt-1000">inetd</span>. Il n'y a que ce syst&egrave;me &agrave; configurer.
<!--l. 826--><p class="indent">   Les services utilis&eacute;s sont (au sens <span 
class="ectt-1000">/etc/services</span>, <span 
class="ecit-1000">port </span><span 
class="ectt-1000">/</span><span 
class="ecit-1000">protocole </span>)
sont&nbsp;:
     <ul class="itemize1">
     <li class="itemize">sur le client &agrave; sauvegarder&nbsp;:
    
     <!--l. 833--><p class="noindent"><span 
class="ectt-0800--87">amanda</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10080/udp</span>
     </li>
     <li class="itemize">sur le serveur g&eacute;rant le d&eacute;rouleur de bande, si on utilise <span 
class="ectt-1000">amrecover </span>et les
     index&nbsp;:
    
                                                                  

                                                                  
     <!--l. 841--><p class="noindent"><span 
class="ectt-0800--87">amanda</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10080/udp</span>
     <!--l. 841--><p class="noindent"><span 
class="ectt-0800--87">amandaidx</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10082/tcp</span>
     <!--l. 841--><p class="noindent"><span 
class="ectt-0800--87">amidxtape</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10083/tcp</span>
     </li></ul>
<!--l. 843--><p class="indent">et les serveur utilis&eacute;s, d&eacute;clar&eacute;s par exemple dans <span 
class="ectt-1000">/etc/inetd.conf</span>, sont&nbsp;:
     <ul class="itemize1">
     <li class="itemize">pour le client&nbsp;:
    
     <!--l. 850--><p class="noindent"><span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">dgram</span>&nbsp;<span 
class="ectt-0800--87">udp</span>&nbsp;<span 
class="ectt-0800--87">wait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amandad</span>&nbsp;<span 
class="ectt-0800--87">amandad</span>
     </li>
     <li class="itemize">pour le serveur &eacute;ventuellement&nbsp;:
    
     <!--l. 856--><p class="noindent"><span 
class="ectt-0800--87">amandaidx</span>&nbsp;<span 
class="ectt-0800--87">stream</span>&nbsp;<span 
class="ectt-0800--87">tcp</span>&nbsp;<span 
class="ectt-0800--87">nowait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amindexd</span>&nbsp;<span 
class="ectt-0800--87">amindexd</span>
     <!--l. 856--><p class="noindent"><span 
class="ectt-0800--87">amidxtape</span>&nbsp;<span 
class="ectt-0800--87">stream</span>&nbsp;<span 
class="ectt-0800--87">tcp</span>&nbsp;<span 
class="ectt-0800--87">nowait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amidxtaped</span>&nbsp;<span 
class="ectt-0800--87">amidxtaped</span>
     </li></ul>
<a name="subsection.2.6"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.6</span> <a 
  name="x1-240002.6"></a>Archivage</h4>
<!--l. 864--><p class="noindent">En soi <a 
  name="dx1-24001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>n'est pas pr&eacute;vu pour faire de l'archivage mais il suffit de faire des
sauvegardes avec un cycle de cassettes (quasi) infini ou de marquer les cassettes
comme non r&eacute;utilisables pour que le tour soit jou&eacute;.
<!--l. 868--><p class="indent">   Le probl&egrave;me survient n&eacute;anmoins lorsque plusieurs instances d'<a 
  name="dx1-24002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>
interviennent sur les m&ecirc;mes partitions (typiquement des sauvegardes du lundi au
jeudi et de l'archivage le vendredi), il ne faut pas que les outils de bas niveau utilis&eacute;s
pour faire les sauvegardes interf&egrave;rent.
<!--l. 873--><p class="indent">   Or c'est le cas par exemple de <span 
class="ectt-1000">dump </span>qui utilise un unique fichier <span 
class="ectt-1000">/etc/dumpdates</span>
pour enregistrer les dates des derni&egrave;res sauvegardes par niveau incr&eacute;mental afin de
savoir ce qui doit &ecirc;tre incr&eacute;mentalement sauvegard&eacute; depuis la sauvegarde
pr&eacute;c&eacute;dente.
<!--l. 878--><p class="indent">   Du coup, s'il y a une sauvegarde et un archivage, les dates des sauvegardes vont
se m&eacute;langer dans le fichier <span 
class="ectt-1000">/etc/dumpdates</span>. Les sauvegardes incr&eacute;mentales seront
faites par rapport aux plus r&eacute;centes des sauvegardes, qu'elles soient de la
sauvegarde classique ou de l'archivage. La restauration d'une sauvegarde
classique ne posera pas de probl&egrave;me car on aura les cassettes des 2 lots de
disponible.
<!--l. 885--><p class="indent">   Par contre une restauration d'archivage pourra aussi demander des cassettes de
sauvegarde classique qui auront pu &ecirc;tre recycl&eacute;es. En fonction des al&eacute;as de
planification on peut avoir de l'archivage trou&eacute;...
<!--l. 889--><p class="indent">   Pour &eacute;viter ces probl&egrave;mes il faut soit utiliser des programmes de sauvegarde de
bas niveau qui n'ont pas de conflit de base de donn&eacute;es soit les enrober pour qu'il n'y
en ait plus, par exemple du plus simple au plus compliqu&eacute;&nbsp;:
                                                                  

                                                                  
     <ul class="itemize1">
     <li class="itemize">utiliser un programme qui prend le nom du fichier de date en param&egrave;tre
     ou en modifier un pour qu'il le fasse<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">mettre un syst&egrave;me de <span 
class="ectt-1000">crontab </span>sur les clients pour mettre en place la
     bonne instance du fichier <span 
class="ectt-1000">/etc/dumpdates</span>. C'est faisable simplement si
     on utilise <a 
  name="dx1-24003"></a>Cfengine en utilisant des classes de type jour ou en utilisant la
     future <span 
class="ecti-1000">dumper </span><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">P</small><small 
class="small-caps">I</small></span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">cloner la hi&eacute;rarchie des fichiers n&eacute;cessaires sauf <span 
class="ectt-1000">/etc/dumpdates </span>&agrave; faire
     tourner <span 
class="ectt-1000">dump </span>par exemple en utilisant l'auto-monteur et les <span 
class="ecti-1000">loopback file</span>
     <span 
class="ecti-1000">system </span>(au sens <a 
  name="dx1-24004"></a><span 
class="eccc-1000">S<small 
class="small-caps">O</small><small 
class="small-caps">L</small><small 
class="small-caps">A</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small><small 
class="small-caps">S</small></span>) et faire un <span 
class="ectt-1000">chroot </span>dessus avant appel &agrave; <span 
class="ectt-1000">dump</span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">modifier dynamiquement le nom du fichier de date ouvert ou cr&eacute;&eacute; par <span 
class="ectt-1000">dump</span>
     en surchargeant les appels syst&egrave;mes <span 
class="ectt-1000">open</span>, <span 
class="ectt-1000">creat </span>et <span 
class="ectt-1000">stat </span>en pr&eacute;chargeant
     le  cache  d'&eacute;dition  dynamique  (style  <span 
class="ectt-1000">crle  </span>de  <a 
  name="dx1-24005"></a><span 
class="eccc-1000">S<small 
class="small-caps">O</small><small 
class="small-caps">L</small><small 
class="small-caps">A</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small><small 
class="small-caps">S</small></span>)  ou  &agrave;  coup  de
     <span class="obeylines-h"><span 
class="ectt-1000">LD_PRELOAD</span></span> ou de <span class="obeylines-h"><span 
class="ectt-1000">LD_LOADFLTR</span></span>.</li></ul>
<a name="subsection.2.7"></a>
   <h4 class="subsectionHead"><span class="titlemark">2.7</span> <a 
  name="x1-250002.7"></a>&Eacute;volutions futures</h4>
<!--l. 918--><p class="noindent">Un certain nombre d'axes de d&eacute;veloppement sont indiqu&eacute;s sur
<a 
href="http://www.amanda.org/ongoing.html" ><span 
class="ectt-0900">http://www.amanda.org/ongoing.html</span></a>. On peut citer&nbsp;:
     <ul class="itemize1">
     <li class="itemize">nouvelle infrastructure g&eacute;n&eacute;rique pour g&eacute;rer la s&eacute;curit&eacute;<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">am&eacute;liorer  l'interface  avec  le  programme  de  sauvegarde  de  bas  niveau
     pour permettre facilement le rajout d'action avant et apr&egrave;s son appel,
     typiquement pour g&eacute;rer des vues instantan&eacute;es de base de donn&eacute;es ou de
     syst&egrave;mes de fichiers (cr&eacute;ations de <span 
class="ecti-1000">snapshot </span>ou &#171; instantan&eacute;s &#187;)<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">g&eacute;n&eacute;raliser le concept de bande &agrave; des <a 
  name="dx1-25001"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">D</small>-<small 
class="small-caps">R</small><small 
class="small-caps">O</small><small 
class="small-caps">M</small></span>, disques, copies &agrave; distance,...
     </li>
     <li class="itemize">pouvoir sauvegarder des partitions dont la taille est sup&eacute;rieure &agrave; la bande<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">am&eacute;liorer encore plus le format des bandes pour faciliter la r&eacute;cup&eacute;ration
     en situation catastrophique.</li></ul>
<a name="section.3"></a>
   <h3 class="sectionHead"><span class="titlemark">3</span> <a 
  name="x1-260003"></a>Exemple des sauvegardes du CRI</h3>
<a 
  name="dx1-26001"></a>
<!--l. 939--><p class="noindent"><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est utilis&eacute; par plusieurs centres de l'&Eacute;cole des Mines de Paris mais c'est
l'installation du <a 
  name="dx1-26002"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small> </span>qui sera d&eacute;crite.
<!--l. 942--><p class="indent">   Les hypoth&egrave;ses architecturales de l'organisation du syst&egrave;me sont bas&eacute;es sur le
parall&eacute;lisme pour exploiter au maximum les ressources, que ce soit processeurs ou
disques. Chaque disque de chaque machine est donc utilis&eacute; pour stocker soit des
r&eacute;pertoires utilisateurs, soit des r&eacute;pertoires de projets, soit des r&eacute;pertoires
syst&egrave;mes.
<!--l. 948--><p class="indent">   L'int&eacute;r&ecirc;t est que le co&ucirc;t mat&eacute;riel est minimis&eacute; <span class="cite">[<a 
href="#XGrosch_law_revisited">ED85</a>]</span> et que le syst&egrave;me est plus
                                                                  

                                                                  
tol&eacute;rant aux pannes (si une partie du r&eacute;seau casse ou une machine tombe en panne et
qu'il n'y a pas de redondance, on ne perd que l'acc&egrave;s aux ressources sur ces machine).
Malheureusement, la gestion syst&egrave;me peut &ecirc;tre tr&egrave;s complexe par rapport &agrave; une
approche centrip&egrave;te &agrave; base de clients l&eacute;gers style terminaux X11. C'est l&agrave; qu'un
syst&egrave;me de sauvegardes distribu&eacute;es automatique tel qu'<a 
  name="dx1-26003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>sauve la donne,
surtout s'il est int&eacute;gr&eacute; dans une infrastructure globale d'automatisation de
l'administration syst&egrave;me.
<!--l. 958--><p class="indent">   D'un point de vue parano&iuml;aque, les donn&eacute;es peuvent se trouver partout comme
dans&nbsp;:
     <ul class="itemize1">
     <li class="itemize"><span 
class="ectt-1000">/var/tmp </span>pour des fichiers temporaires ou des sauvegardes de fichiers
     &eacute;dit&eacute;s par <span 
class="ectt-1000">vi</span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize"><span 
class="ectt-1000">/var/spool/calendar </span>pour les calendriers de <a 
  name="dx1-26004"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">D</small><small 
class="small-caps">E</small></span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize"><span 
class="ectt-1000">/var/spool/cron </span>pour les <span 
class="ectt-1000">crontabs </span>et autres travaux <span 
class="ectt-1000">at</span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">des fichiers de configuration dans <span 
class="ectt-1000">/etc </span>tels que des cl&eacute;s d'authentification
     &agrave; la <span 
class="ectt-1000">ssh </span>qui, si elles &eacute;taient perdues, demanderaient leur reconstruction et
     leur rediffusion confidentielle &agrave; toutes les machines en relation.</li></ul>
<!--l. 971--><p class="noindent">Comme ces fichiers &eacute;voluent peu, le m&eacute;canisme de sauvegarde incr&eacute;mentale comprime
beaucoup l'information sauvegard&eacute;e et c'est peu co&ucirc;teux en bande (on peut rappeler
un mot de <span 
class="eccc-1000">Z<small 
class="small-caps">H</small><small 
class="small-caps">U</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">G</small><small 
class="small-caps">Z</small><small 
class="small-caps">I</small></span>, tao&iuml;ste du 4&egrave;me si&egrave;cle avant notre &egrave;re, dans <span 
class="ecti-1000">Le monde des</span>
<span 
class="ecti-1000">hommes</span>, chapitre 4&nbsp;: &#171; <span 
class="ecti-1000">Tout le monde conna</span><span 
class="ecti-1000">&icirc;t l'utilit</span><span 
class="ecti-1000">&eacute; de l'utile mais rares sont ceux</span>
<span 
class="ecti-1000">qui savent l'utilit</span><span 
class="ecti-1000">&eacute; de l'inutile </span>&#187;).
<!--l. 978--><p class="indent">   Vue la simplicit&eacute; de la configuration d'<a 
  name="dx1-26005"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>, le choix de sauvegarder toutes les
partitions (sauf le <span 
class="ecti-1000">swap</span>...) a &eacute;t&eacute; fait, avec des sauvegardes journali&egrave;res du lundi soir
au jeudi soir (les configurations de type <span 
class="ectt-1000">jour </span>dans la suite) et de l'archivage le
vendredi soir (configurations de type <span 
class="ectt-1000">longtemps</span>).
<!--l. 984--><p class="indent">   Le r&eacute;seau du <a 
  name="dx1-26006"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small> </span>est partag&eacute; en 2 entit&eacute;s&nbsp;:
     <ul class="itemize1">
     <li class="itemize">une zone &#171; d&eacute;militaris&eacute;e &#187; qui rassemble les serveurs <a 
  name="dx1-26007"></a><span 
class="eccc-1000"><small 
class="small-caps">W</small><small 
class="small-caps">W</small><small 
class="small-caps">W</small> </span>et poss&egrave;de
     son d&eacute;rouleur Exabyte 8mm Mammoth de 20&nbsp;Go sur la machine <span 
class="ectt-1000">veneux</span>.
     Chaque nuit sont sauvegard&eacute;es 38 partitions occup&eacute;es par 67&nbsp;Go<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">une zone r&eacute;seau recherche avec 2 d&eacute;rouleurs sur 2 serveurs&nbsp;:
       <ul class="itemize2">
       <li class="itemize">un vieil Exabyte 8mm de 7Go sur la machine <span 
class="ectt-1000">deauville </span>qui sauvegarde
       le serveur du mast&egrave;re <span 
class="eccc-1000"><small 
class="small-caps">I</small><small 
class="small-caps">A</small><small 
class="small-caps">R</small>2<small 
class="small-caps">M</small> </span>et les anciennes machines, donc, de fait,
       de moins en moins de partitions. Chaque nuit sont sauvegard&eacute;es 123
       partitions repr&eacute;sentant 75&nbsp;Go utilis&eacute;s<span class="frenchb-thinspace"> </span>;
       </li>
       <li class="itemize">un autre Exabyte 8mm Mammoth de 20&nbsp;Go sur la machine <span 
class="ectt-1000">chailly99</span>
       sauvegarde   les   machines   plus   r&eacute;centes,   &agrave;   savoir   85   partitions
       repr&eacute;sentant aussi 75&nbsp;Go.</li></ul>
     </li></ul>
<!--l. 1014--><p class="indent">   Les r&eacute;seaux &eacute;tant ind&eacute;pendants et chacun &#171; commut&eacute; &#187;, les seules limitations de
d&eacute;bit sont celles du lien Ethernet de chaque serveur <a 
  name="dx1-26008"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>. C'est donc ce qui fixera
                                                                  

                                                                  
le d&eacute;bit de sauvegarde raisonnablement utilisable.
<a name="subsection.3.1"></a>
   <h4 class="subsectionHead"><span class="titlemark">3.1</span> <a 
  name="x1-270003.1"></a>Mode op&eacute;ratoire ou &#171; de la vie et de la mort des cassettes &#187;</h4>
<!--l. 1025--><p class="noindent">Chaque jour, il suffit de mettre en place dans chaque d&eacute;rouleur les cassettes
demand&eacute;es par les comptes-rendus de la nuit pr&eacute;c&eacute;dente ou des courriers de
v&eacute;rification d'<span 
class="ectt-1000">amcheck</span>.
<!--l. 1029--><p class="indent">   Il y a 2 jeux de cassettes par d&eacute;rouleur&nbsp;: celles de sauvegarde (qui sont recycl&eacute;es)
et celles d'archivage (qui ne le sont pas). L'approche la plus s&eacute;curis&eacute;e serait de
toujours utiliser des cassettes neuves mais en ao&ucirc;t 2001 les prix des supports allaient
de 1,5 &agrave; 2,4 euros/Go en fonction de la technologie utilis&eacute;e ce qui dans notre cas
donnerait tout de m&ecirc;me par jour un co&ucirc;t entre 70 et 113 euros (entre 352 et 564
euros par semaine).
<!--l. 1037--><p class="indent">   Dans la mesure o&ugrave; le minimum est d'injecter une cassette par d&eacute;rouleur et par
semaine pour l'archivage du vendredi, une solution moins luxueuse a &eacute;t&eacute;
choisie&nbsp;:
     <ul class="itemize1">
     <li class="itemize">le  vendredi  on  prend  pour  l'archivage  la  cassette  qui  sera  demand&eacute;e
     la  prochaine  fois  par  la  sauvegarde  journali&egrave;re,  donc  juste  avant  son
     recyclage, et on fait un <span 
class="ectt-1000">amlabel </span>dessus pour la mettre dans le lot des
     cassettes de type <span 
class="ectt-1000">longtemps </span>en incluant la date du jour dans le nom de
     la cassette, du style <span 
class="ectt-1000">CHAILLY99-LONG-24@13-10-2000 </span>afin d'&ecirc;tre capable
     dans le futur de savoir &agrave; quoi cela correspond m&ecirc;me si on a perdu toute
     trace des fichiers d'<a 
  name="dx1-27001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span><span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">le  lundi  on  donne  une  cassette  neuve  &agrave;  la  sauvegarde  journali&egrave;re  en
     incluant aussi avec <span 
class="ectt-1000">amlabel </span>la date du jour dans le nom de la cassette
     (<span 
class="ectt-1000">CHAILLY99-J-06@26-04-2000</span>)  afin  de  savoir  exactement  quand  a  &eacute;t&eacute;
     introduite la cassette et suivre sa vie.</li></ul>
<!--l. 1054--><p class="noindent">L'id&eacute;e est donc qu'on va renouveler petit &agrave; petit le stock de sauvegarde pour avoir des
cassettes en relativement bon &eacute;tat au co&ucirc;t d'une cassette par semaine, soit pour le
<a 
  name="dx1-27002"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small> </span>entre 70 et 113 euros par semaine.
<!--l. 1058--><p class="indent">   Mais qu'est-ce qui nous garantit que toutes les cassettes journali&egrave;res seront bien
remplac&eacute;es et qu'on ne sera pas dans un cas o&ugrave; par malchance c'est toujours la m&ecirc;me
cassette du <span 
class="ecti-1000">tape cycle </span>qu'on remplace<span class="frenchb-thinspace"> </span>?
<!--l. 1062--><p class="indent">   En consid&eacute;rant que les <span 
class="cmmi-10">n </span>cassettes journali&egrave;res sont utilis&eacute;es &agrave; tour de r&ocirc;le
et qu'une est chang&eacute;e toutes les 4 sauvegardes le lundi puisqu'il y en a 4
par semaine il suffit de choisir <span 
class="cmmi-10">n </span>tel que 4 soit un &eacute;l&eacute;ment g&eacute;n&eacute;rateur du
groupe
<img 
src="article1x.gif" alt="Z/nZ  " >,
c'est &agrave; dire que 4 et <span 
class="cmmi-10">n </span>soient premiers entre eux. En outre il peut y avoir des
sauvegardes qui n'ont pas march&eacute; par exemple &agrave; cause d'une erreur d'&eacute;criture. Dans
ce cas on a besoin de la cassette suivante ou d'une cassette neuve pour faire un
<span 
class="ectt-1000">amflush</span>. Dans les 2 cas cela entra&icirc;ne un d&eacute;calage dans le cycle et donc
&eacute;ventuellement un doublement de la vie de certaines cassettes.
<!--l. 1074--><p class="indent">   Au <a 
  name="dx1-27003"></a><span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">R</small><small 
class="small-caps">I</small> </span>nous avons choisi <span 
class="cmmi-10">n </span><span 
class="cmr-10">= 31 </span>ce qui fait un cycle de sauvegardes de 7 semaines
et 3 jours en tenant compte des jours ouvrables.
<a name="subsection.3.2"></a>
   <h4 class="subsectionHead"><span class="titlemark">3.2</span> <a 
  name="x1-280003.2"></a>Installation</h4>
                                                                  

                                                                  
<!--l. 1081--><p class="noindent">L'installation est automatique sur toute les machines clientes ou serveuses gr&acirc;ce au
syst&egrave;me <a 
  name="dx1-28001"></a>Cfengine utilis&eacute; <span class="cite">[<a 
href="#Xkeryell01-JRES-cfengine">Ker01</a>,&nbsp;<a 
href="#XWWW-cfengine">Bur01</a>]</span>. L'installation est g&eacute;r&eacute;e par le fichier
<span 
class="ectt-1000">/usr/local/share/cfengine/cf/amanda.cf</span>&nbsp;:

<!--l. 1097--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">To</span>&nbsp;<span 
class="ectt-0800--87">install</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">software</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">clients</span>&nbsp;<span 
class="ectt-0800--87">and</span>&nbsp;<span 
class="ectt-0800--87">servers.</span>
<!--l. 1097--><p class="noindent">
<!--l. 1097--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">$Header:</span>&nbsp;<span 
class="ectt-0800--87">/users/lit/keryell/TeX/conf/JRES2001/amanda/article.tex,v</span>&nbsp;<span 
class="ectt-0800--87">1.5</span>&nbsp;<span 
class="ectt-0800--87">2001/11/16</span>&nbsp;<span 
class="ectt-0800--87">09:23:44</span>&nbsp;<span 
class="ectt-0800--87">keryell</span>&nbsp;<span 
class="ectt-0800--87">Exp</span>&nbsp;<span 
class="ectt-0800--87">$</span>
<!--l. 1097--><p class="noindent">

<!--l. 1105--><p class="noindent"><span 
class="ectt-0800--87">classes:</span>
<!--l. 1105--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Define</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">servers:</span>
<!--l. 1105--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers_CRI</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">deauville_ensmp_fr</span>&nbsp;<span 
class="ectt-0800--87">dns_cri_ensmp_fr</span>&nbsp;<span 
class="ectt-0800--87">veneux_ensmp_fr</span>&nbsp;<span 
class="ectt-0800--87">)</span>
<!--l. 1105--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers_LIT</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">rodomouls_enst_bretagne_fr</span>&nbsp;<span 
class="ectt-0800--87">)</span>
<!--l. 1105--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">amanda_servers_CRI</span>&nbsp;<span 
class="ectt-0800--87">amanda_servers_LIT</span>&nbsp;<span 
class="ectt-0800--87">)</span>

<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent"><span 
class="ectt-0800--87">links:</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Amanda</span>&nbsp;<span 
class="ectt-0800--87">data</span>&nbsp;<span 
class="ectt-0800--87">bases</span>&nbsp;<span 
class="ectt-0800--87">can</span>&nbsp;<span 
class="ectt-0800--87">be</span>&nbsp;<span 
class="ectt-0800--87">huge,</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">so</span>&nbsp;<span 
class="ectt-0800--87">we</span>&nbsp;<span 
class="ectt-0800--87">may</span>&nbsp;<span 
class="ectt-0800--87">need</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">redirect</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">larger</span>&nbsp;<span 
class="ectt-0800--87">disks:</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers.deauville_ensmp_fr::</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/var/adm/amanda</span>&nbsp;<span 
class="ectt-0800--87">-&gt;!</span>&nbsp;<span 
class="ectt-0800--87">/home/deauville/bassine3/var/amanda</span>
<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Just</span>&nbsp;<span 
class="ectt-0800--87">a</span>&nbsp;<span 
class="ectt-0800--87">shortcut</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">lazy</span>&nbsp;<span 
class="ectt-0800--87">computer</span>&nbsp;<span 
class="ectt-0800--87">scientists</span>&nbsp;<span 
class="ectt-0800--87">:-)</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">any::</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/amanda</span>&nbsp;<span 
class="ectt-0800--87">-&gt;!</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/etc/amanda</span>
<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent"><span 
class="ectt-0800--87">files:</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">solaris::</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Disks</span>&nbsp;<span 
class="ectt-0800--87">should</span>&nbsp;<span 
class="ectt-0800--87">be</span>&nbsp;<span 
class="ectt-0800--87">readable</span>&nbsp;<span 
class="ectt-0800--87">by</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">sys</span>&nbsp;<span 
class="ectt-0800--87">group,</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">but</span>&nbsp;<span 
class="ectt-0800--87">there</span>&nbsp;<span 
class="ectt-0800--87">is</span>&nbsp;<span 
class="ectt-0800--87">a</span>&nbsp;<span 
class="ectt-0800--87">glitch</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">IDE</span>&nbsp;<span 
class="ectt-0800--87">disks</span>&nbsp;<span 
class="ectt-0800--87">:</span>
<!--l. 1128--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/devices/pci@1f,0/pci@1,1/ide@3</span>&nbsp;<span 
class="ectt-0800--87">mode=g+r</span>&nbsp;<span 
class="ectt-0800--87">recurse=1</span>&nbsp;<span 
class="ectt-0800--87">action=fixall</span>
<!--l. 1128--><p class="noindent">
<!--l. 1128--><p class="noindent">

<!--l. 1147--><p class="noindent"><span 
class="ectt-0800--87">editfiles:</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">any::</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Add</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">software</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">client</span>&nbsp;<span 
class="ectt-0800--87">side:</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/services</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">For</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">client:&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amanda</span>&nbsp;<span 
class="ectt-0800--87">10080/udp&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartInetd&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>
<!--l. 1147--><p class="noindent">
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/inetd.conf</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">For</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">client</span>&nbsp;<span 
class="ectt-0800--87">service:&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amanda</span>&nbsp;<span 
class="ectt-0800--87">dgram</span>&nbsp;<span 
class="ectt-0800--87">udp</span>&nbsp;<span 
class="ectt-0800--87">wait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amandad</span>&nbsp;<span 
class="ectt-0800--87">amandad&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartInetd&#34;</span>
<!--l. 1147--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>

<!--l. 1179--><p class="noindent">
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers::</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Add</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">software</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">server</span>&nbsp;<span 
class="ectt-0800--87">side:</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/services</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">For</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">server:&#34;</span>
                                                                  

                                                                  
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amandaidx</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10082/tcp&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amidxtape</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">10083/tcp&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartInetd&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>
<!--l. 1179--><p class="noindent">
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/inetd.conf</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">For</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">server,</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">access</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">catalogues:&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amandaidx</span>&nbsp;<span 
class="ectt-0800--87">stream</span>&nbsp;<span 
class="ectt-0800--87">tcp</span>&nbsp;<span 
class="ectt-0800--87">nowait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amindexd</span>&nbsp;<span 
class="ectt-0800--87">amindexd&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">For</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">server,</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">remote</span>&nbsp;<span 
class="ectt-0800--87">access</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">restoration:&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;amidxtape</span>&nbsp;<span 
class="ectt-0800--87">stream</span>&nbsp;<span 
class="ectt-0800--87">tcp</span>&nbsp;<span 
class="ectt-0800--87">nowait</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/libexec/amidxtaped</span>&nbsp;<span 
class="ectt-0800--87">amidxtaped&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartInetd&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>
<!--l. 1179--><p class="noindent">
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers.solaris::</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Allow</span>&nbsp;<span 
class="ectt-0800--87">crontab</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">user</span>&nbsp;<span 
class="ectt-0800--87">that</span>&nbsp;<span 
class="ectt-0800--87">runs</span>&nbsp;<span 
class="ectt-0800--87">amanda:</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/etc/cron.d/cron.deny</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">CommentLinesMatching</span>&nbsp;<span 
class="ectt-0800--87">&#34;bin&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartCron&#34;</span>
<!--l. 1179--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>
<!--l. 1179--><p class="noindent">
<!--l. 1179--><p class="noindent">

<!--l. 1222--><p class="noindent"><span 
class="ectt-0800--87">control:</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Define</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">configuration</span>&nbsp;<span 
class="ectt-0800--87">names</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">each</span>&nbsp;<span 
class="ectt-0800--87">server:</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">deauville_ensmp_fr::</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">daily_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'jour')</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">weekly_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'longtemps')</span>
<!--l. 1222--><p class="noindent">
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">dns_cri_ensmp_fr::</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">daily_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'chailly99_jour')</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">weekly_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'chailly99_longtemps')</span>
<!--l. 1222--><p class="noindent">
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">veneux_ensmp_fr::</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">daily_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'veneux_jour')</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">weekly_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'veneux_longtemps')</span>
<!--l. 1222--><p class="noindent">
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">rodomouls_enst_bretagne_fr::</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">daily_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'LIT_jour')</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">weekly_backup_name</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">(</span>&nbsp;<span 
class="ectt-0800--87">'LIT_longtemps')</span>
<!--l. 1222--><p class="noindent">
<!--l. 1222--><p class="noindent">
<!--l. 1222--><p class="noindent"><span 
class="ectt-0800--87">editfiles:</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Add</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">bin</span>&nbsp;<span 
class="ectt-0800--87">crontab</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">various</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">invocations:</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">amanda_servers.solaris::</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">{</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/var/spool/cron/crontabs/bin</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AutoCreate</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">Verify</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">is</span>&nbsp;<span 
class="ectt-0800--87">OK</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">next</span>&nbsp;<span 
class="ectt-0800--87">backup:&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">daily</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">$(daily_backup_name):&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;00</span>&nbsp;<span 
class="ectt-0800--87">11</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amcheck</span>&nbsp;<span 
class="ectt-0800--87">-m</span>&nbsp;<span 
class="ectt-0800--87">$(daily_backup_name)&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;00</span>&nbsp;<span 
class="ectt-0800--87">17</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">2-4</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amcheck</span>&nbsp;<span 
class="ectt-0800--87">-m</span>&nbsp;<span 
class="ectt-0800--87">$(daily_backup_name)&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">friday</span>&nbsp;<span 
class="ectt-0800--87">weekly</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">$(weekly_backup_name):&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;00</span>&nbsp;<span 
class="ectt-0800--87">11</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">5</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amcheck</span>&nbsp;<span 
class="ectt-0800--87">-m</span>&nbsp;<span 
class="ectt-0800--87">$(weekly_backup_name)&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Launch</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">followed</span>&nbsp;<span 
class="ectt-0800--87">by</span>&nbsp;<span 
class="ectt-0800--87">a</span>&nbsp;<span 
class="ectt-0800--87">media</span>&nbsp;<span 
class="ectt-0800--87">verification:</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">daily</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">$(daily_backup_name):&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;10</span>&nbsp;<span 
class="ectt-0800--87">23</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">1-4</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amdump</span>&nbsp;<span 
class="ectt-0800--87">$(daily_backup_name);</span>&nbsp;<span 
class="ectt-0800--87">mt</span>&nbsp;<span 
class="ectt-0800--87">-f</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">rew;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amrestore</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">juste-pour-verifier;</span>&nbsp;<span 
class="ectt-0800--87">mt</span>&nbsp;<span 
class="ectt-0800--87">-f</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">rew&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;#</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">friday</span>&nbsp;<span 
class="ectt-0800--87">weekly</span>&nbsp;<span 
class="ectt-0800--87">backup</span>&nbsp;<span 
class="ectt-0800--87">$(weekly_backup_name):&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">AppendIfNoSuchLine</span>&nbsp;<span 
class="ectt-0800--87">&#34;10</span>&nbsp;<span 
class="ectt-0800--87">23</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">5</span>&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amdump</span>&nbsp;<span 
class="ectt-0800--87">$(weekly_backup_name);</span>&nbsp;<span 
class="ectt-0800--87">mt</span>&nbsp;<span 
class="ectt-0800--87">-f</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">rew;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">/usr/local/sbin/amrestore</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">juste-pour-verifier;</span>&nbsp;<span 
class="ectt-0800--87">mt</span>&nbsp;<span 
class="ectt-0800--87">-f</span>&nbsp;<span 
class="ectt-0800--87">/dev/rmt/0hn</span>&nbsp;<span 
class="ectt-0800--87">rew&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">DefineClasses</span>&nbsp;<span 
class="ectt-0800--87">&#34;RestartCron&#34;</span>
<!--l. 1222--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">}</span>
<!--l. 1224--><p class="indent">   On peut remarquer que l'appel &agrave; la sauvegarde <span 
class="ectt-1000">amdump </span>d'<a 
  name="dx1-28002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est suivi d'une
restauration des disques d'une machine fantaisiste <span 
class="ectt-1000">juste-pour-verifier </span>pour forcer
une lecture des d&eacute;buts de chaque enregistrement de partition et donc effectuer une
v&eacute;rification grossi&egrave;re de l'&eacute;criture effectu&eacute;e sur la bande&nbsp;: la liste des partitions
                                                                  

                                                                  
pr&eacute;sentes sera renvoy&eacute;e par <span 
class="ectt-1000">cron </span>aux administrateurs.
<a name="subsection.3.3"></a>
   <h4 class="subsectionHead"><span class="titlemark">3.3</span> <a 
  name="x1-290003.3"></a>Configuration</h4>
<!--l. 1235--><p class="noindent">Dans <span 
class="ectt-1000">/usr/local/etc/amanda/</span><span 
class="ecit-1000">configuration </span>se trouvent les quelques fichiers
n&eacute;cessaires &agrave; la configuration d'<a 
  name="dx1-29001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>.
<!--l. 1238--><p class="indent">   Notons que comme tout se trouve dans <span 
class="ectt-1000">/usr/local</span>, m&ecirc;me apr&egrave;s r&eacute;installation du
syst&egrave;me, il suffit de remonter <span 
class="ectt-1000">/usr/local </span>et la partition contenant la base de
donn&eacute;es d'<a 
  name="dx1-29002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>pour avoir un syst&egrave;me de sauvegarde et restauration pleinement
fonctionnel.<a name="subsubsection.3.3.1"></a>
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.1 </span> <a 
  name="x1-300003.3.1"></a>Param&ecirc;tres d'une configuration</h5>
<a name="paragraph.3.3.1.1"></a>
<!--l. 1247--><p class="noindent"><span class="paragraphHead"><a 
  name="x1-310003.3.1.1"></a><span 
class="ecbx-1000">Sauvegarde journali</span><span 
class="ecbx-1000">&egrave;re</span></span>
   Le fichier <span class="obeylines-h"><span 
class="ectt-1000">/usr/local/etc/amanda/chailly99_jour/amanda.conf</span></span> contient par
exemple&nbsp;:
     <ul class="itemize1">
     <li class="itemize">des param&egrave;tres g&eacute;n&eacute;riques&nbsp;:
    
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">your</span>&nbsp;<span 
class="ectt-0800--87">organization</span>&nbsp;<span 
class="ectt-0800--87">name</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">reports</span>
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">org</span>&nbsp;<span 
class="ectt-0800--87">&#34;chailly99_jour&#34;</span>
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">mailing</span>&nbsp;<span 
class="ectt-0800--87">list</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">operators</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">your</span>&nbsp;<span 
class="ectt-0800--87">site</span>
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">mailto</span>&nbsp;<span 
class="ectt-0800--87">&#34;sauvegardes-amanda-chailly99@cri.ensmp.fr&#34;</span>
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">user</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">run</span>&nbsp;<span 
class="ectt-0800--87">dumps</span>&nbsp;<span 
class="ectt-0800--87">under</span>
     <!--l. 1264--><p class="noindent"><span 
class="ectt-0800--87">dumpuser</span>&nbsp;<span 
class="ectt-0800--87">&#34;bin&#34;</span>
     </li>
     <li class="itemize">la pression qu'on autorise dans le r&eacute;seau&nbsp;:
    
     <!--l. 1277--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">maximum</span>&nbsp;<span 
class="ectt-0800--87">dumpers</span>&nbsp;<span 
class="ectt-0800--87">that</span>&nbsp;<span 
class="ectt-0800--87">will</span>&nbsp;<span 
class="ectt-0800--87">run</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">parallel</span>
     <!--l. 1277--><p class="noindent"><span 
class="ectt-0800--87">inparallel</span>&nbsp;<span 
class="ectt-0800--87">8</span>
     <!--l. 1277--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">maximum</span>&nbsp;<span 
class="ectt-0800--87">net</span>&nbsp;<span 
class="ectt-0800--87">bandwidth</span>&nbsp;<span 
class="ectt-0800--87">for</span>&nbsp;<span 
class="ectt-0800--87">Amanda,</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">KB</span>&nbsp;<span 
class="ectt-0800--87">per</span>&nbsp;<span 
class="ectt-0800--87">sec</span>
     <!--l. 1277--><p class="noindent"><span 
class="ectt-0800--87">netusage</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">850</span>
     </li>
     <li class="itemize">les contraintes que l'on impose au planificateur&nbsp;:
    
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">number</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">days</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">normal</span>&nbsp;<span 
class="ectt-0800--87">dump</span>&nbsp;<span 
class="ectt-0800--87">cycle</span>
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">mincycle</span>&nbsp;<span 
class="ectt-0800--87">7</span>&nbsp;<span 
class="ectt-0800--87">days</span>
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">maximum</span>&nbsp;<span 
class="ectt-0800--87">amanda</span>&nbsp;<span 
class="ectt-0800--87">will</span>&nbsp;<span 
class="ectt-0800--87">be</span>&nbsp;<span 
class="ectt-0800--87">allowed</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">stretch</span>&nbsp;<span 
class="ectt-0800--87">it</span>
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">maxcycle</span>&nbsp;<span 
class="ectt-0800--87">10</span>&nbsp;<span 
class="ectt-0800--87">days</span>
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">number</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">tapes</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">rotation</span>
     <!--l. 1292--><p class="noindent"><span 
class="ectt-0800--87">tapecycle</span>&nbsp;<span 
class="ectt-0800--87">31</span>&nbsp;<span 
class="ectt-0800--87">days</span>
     </li>
     <li class="itemize">des valeurs standard pour r&eacute;gler l'algorithme de planification qui n'ont pas &agrave;
     &ecirc;tre chang&eacute;es outre mesure&nbsp;:
    
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">minimum</span>&nbsp;<span 
class="ectt-0800--87">savings</span>&nbsp;<span 
class="ectt-0800--87">(threshold)</span>&nbsp;<span 
class="ectt-0800--87">to</span>&nbsp;<span 
class="ectt-0800--87">bump</span>&nbsp;<span 
class="ectt-0800--87">level</span>&nbsp;<span 
class="ectt-0800--87">1</span>&nbsp;<span 
class="ectt-0800--87">-&gt;</span>&nbsp;<span 
class="ectt-0800--87">2</span>
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">bumpsize</span>&nbsp;<span 
class="ectt-0800--87">100</span>&nbsp;<span 
class="ectt-0800--87">MB</span>
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">minimum</span>&nbsp;<span 
class="ectt-0800--87">days</span>&nbsp;<span 
class="ectt-0800--87">at</span>&nbsp;<span 
class="ectt-0800--87">each</span>&nbsp;<span 
class="ectt-0800--87">level</span>
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">bumpdays</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2</span>
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">threshold</span>&nbsp;<span 
class="ectt-0800--87">=</span>&nbsp;<span 
class="ectt-0800--87">bumpsize</span>&nbsp;<span 
class="ectt-0800--87">*</span>&nbsp;<span 
class="ectt-0800--87">(level-1)**bumpmult</span>
     <!--l. 1308--><p class="noindent"><span 
class="ectt-0800--87">bumpmult</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">2</span>
     </li>
     <li class="itemize">le d&eacute;rouleur &agrave; utiliser&nbsp;:
                                                                  

                                                                  
    
     <!--l. 1321--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">device</span>
     <!--l. 1321--><p class="noindent"><span 
class="ectt-0800--87">tapedev</span>&nbsp;<span 
class="ectt-0800--87">&#34;/dev/rmt/0hn&#34;</span>
     <!--l. 1321--><p class="noindent">&nbsp;<span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">what</span>&nbsp;<span 
class="ectt-0800--87">kind</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">it</span>&nbsp;<span 
class="ectt-0800--87">is</span>&nbsp;<span 
class="ectt-0800--87">(seetapetypes</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">below)</span>
     <!--l. 1321--><p class="noindent"><span 
class="ectt-0800--87">tapetype</span>&nbsp;<span 
class="ectt-0800--87">EXB-Mammoth</span>
     </li>
     <li class="itemize">le nom des cassettes, typiquement <span 
class="ectt-1000">CHAILLY99-J-</span><span 
class="ecit-1000">num</span><span 
class="ecit-1000">&eacute;ro </span><span 
class="ectt-1000">@</span><span 
class="ecit-1000">jour </span><span 
class="ectt-1000">-</span><span 
class="ecit-1000">mois </span><span 
class="ectt-1000">-</span><span 
class="ecit-1000">ann</span><span 
class="ecit-1000">&eacute;e </span>&nbsp;:
    
     <!--l. 1334--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">label</span>&nbsp;<span 
class="ectt-0800--87">constraint</span>&nbsp;<span 
class="ectt-0800--87">regex:</span>&nbsp;<span 
class="ectt-0800--87">all</span>&nbsp;<span 
class="ectt-0800--87">tapes</span>&nbsp;<span 
class="ectt-0800--87">must</span>&nbsp;<span 
class="ectt-0800--87">match</span>
     <!--l. 1334--><p class="noindent"><span 
class="ectt-0800--87">labelstr</span>
     <!--l. 1334--><p class="noindent"><span 
class="ectt-0800--87">&#34;^CHAILLY99-J-[0-9][0-9]*[@]*[0-9][0-9]*-[0-9][0-9]*-[0-9][0-9][0-9][0-9]*$&#34;</span>
     </li>
     <li class="itemize">o&ugrave; ranger les informations n&eacute;cessaires au bon fonctionnement&nbsp;:
    
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">where</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">holding</span>&nbsp;<span 
class="ectt-0800--87">disk</span>&nbsp;<span 
class="ectt-0800--87">is</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">diskdir</span>&nbsp;<span 
class="ectt-0800--87">&#34;/home/chailly99/bibendum5/amanda/work/chailly99_jour&#34;</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">how</span>&nbsp;<span 
class="ectt-0800--87">much</span>&nbsp;<span 
class="ectt-0800--87">space</span>&nbsp;<span 
class="ectt-0800--87">can</span>&nbsp;<span 
class="ectt-0800--87">we</span>&nbsp;<span 
class="ectt-0800--87">use</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">it</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">disksize</span>&nbsp;<span 
class="ectt-0800--87">10000</span>&nbsp;<span 
class="ectt-0800--87">MB</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">database</span>&nbsp;<span 
class="ectt-0800--87">filename</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">infofile</span>&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_jour/curinfo&#34;</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">log</span>&nbsp;<span 
class="ectt-0800--87">directory</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">logdir</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_jour&#34;</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">index</span>&nbsp;<span 
class="ectt-0800--87">directory</span>
     <!--l. 1353--><p class="noindent"><span 
class="ectt-0800--87">indexdir</span>&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_jour/index&#34;</span>
     </li>
     <li class="itemize">une liste de description de d&eacute;rouleurs utilisables&nbsp;:
    
     <!--l. 1371--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">tapetypes</span>
     <!--l. 1371--><p class="noindent"><span 
class="ectt-0800--87">#</span>
     <!--l. 1371--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Define</span>&nbsp;<span 
class="ectt-0800--87">the</span>&nbsp;<span 
class="ectt-0800--87">type</span>&nbsp;<span 
class="ectt-0800--87">of</span>&nbsp;<span 
class="ectt-0800--87">tape</span>&nbsp;<span 
class="ectt-0800--87">you</span>&nbsp;<span 
class="ectt-0800--87">use</span>&nbsp;<span 
class="ectt-0800--87">here,</span>&nbsp;<span 
class="ectt-0800--87">and</span>&nbsp;<span 
class="ectt-0800--87">use</span>&nbsp;<span 
class="ectt-0800--87">it</span>&nbsp;<span 
class="ectt-0800--87">in</span>&nbsp;<span 
class="ectt-0800--87">&#34;tapetype&#34;</span>&nbsp;<span 
class="ectt-0800--87">above.</span>
     <!--l. 1371--><p class="noindent"><span 
class="ectt-0800--87">define</span>&nbsp;<span 
class="ectt-0800--87">tapetype</span>&nbsp;<span 
class="ectt-0800--87">EXB-Mammoth</span>&nbsp;<span 
class="ectt-0800--87">{</span>
     <!--l. 1371--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">comment</span>&nbsp;<span 
class="ectt-0800--87">&#34;Exabyte</span>&nbsp;<span 
class="ectt-0800--87">Mammoth</span>&nbsp;<span 
class="ectt-0800--87">drive</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">local</span>&nbsp;<span 
class="ectt-0800--87">machine&#34;</span>
     <!--l. 1371--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">length</span>&nbsp;<span 
class="ectt-0800--87">20000</span>&nbsp;<span 
class="ectt-0800--87">mbytes</span>
     <!--l. 1371--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">filemark</span>&nbsp;<span 
class="ectt-0800--87">48</span>&nbsp;<span 
class="ectt-0800--87">kbytes</span>
     <!--l. 1371--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">speed</span>&nbsp;<span 
class="ectt-0800--87">3</span>&nbsp;<span 
class="ectt-0800--87">mbytes</span>
     <!--l. 1371--><p class="noindent"><span 
class="ectt-0800--87">}</span>
     </li>
     <li class="itemize">une liste de type de sauvegardes utilisables&nbsp;:
    
     <!--l. 1393--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">dumptypes</span>
     <!--l. 1393--><p class="noindent"><span 
class="ectt-0800--87">define</span>&nbsp;<span 
class="ectt-0800--87">dumptype</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>&nbsp;<span 
class="ectt-0800--87">{</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">comment</span>&nbsp;<span 
class="ectt-0800--87">&#34;Non-root</span>&nbsp;<span 
class="ectt-0800--87">partitions</span>&nbsp;<span 
class="ectt-0800--87">on</span>&nbsp;<span 
class="ectt-0800--87">reasonably</span>&nbsp;<span 
class="ectt-0800--87">fast</span>&nbsp;<span 
class="ectt-0800--87">machines&#34;</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">options</span>&nbsp;<span 
class="ectt-0800--87">compress-fast</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">index</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">priority</span>&nbsp;<span 
class="ectt-0800--87">medium</span>
     <!--l. 1393--><p class="noindent"><span 
class="ectt-0800--87">}</span>
     <!--l. 1393--><p class="noindent"><span 
class="ectt-0800--87">define</span>&nbsp;<span 
class="ectt-0800--87">dumptype</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>&nbsp;<span 
class="ectt-0800--87">{</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">comment</span>&nbsp;<span 
class="ectt-0800--87">&#34;Root</span>&nbsp;<span 
class="ectt-0800--87">partitions&#34;</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">options</span>&nbsp;<span 
class="ectt-0800--87">compress-fast</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">index</span>
     <!--l. 1393--><p class="noindent">&nbsp;&nbsp;&nbsp;&nbsp;<span 
class="ectt-0800--87">priority</span>&nbsp;<span 
class="ectt-0800--87">low</span>
     <!--l. 1393--><p class="noindent"><span 
class="ectt-0800--87">}</span>
     </li></ul>
<a name="paragraph.3.3.1.2"></a>
<!--l. 1400--><p class="noindent"><span class="paragraphHead"><a 
  name="x1-320003.3.1.2"></a><span 
class="ecbx-1000">Archivage hebdomadaire</span></span>
   Il s'agit du m&ecirc;me fichier que pr&eacute;c&eacute;demment si ce n'est quelques diff&eacute;rences&nbsp;:
                                                                  

                                                                  

<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">org</span>&nbsp;<span 
class="ectt-0800--87">&#34;chailly99_longtemps&#34;</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">mincycle</span>&nbsp;<span 
class="ectt-0800--87">5</span>&nbsp;<span 
class="ectt-0800--87">days</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">maxcycle</span>&nbsp;<span 
class="ectt-0800--87">40</span>&nbsp;<span 
class="ectt-0800--87">days</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">tapecycle</span>&nbsp;<span 
class="ectt-0800--87">9999</span>&nbsp;<span 
class="ectt-0800--87">days</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">labelstr</span>&nbsp;<span 
class="ectt-0800--87">&#34;^CHAILLY99-LONG-[0-9][0-9]@[0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9][-]*[0-9]*$&#34;</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">infofile</span>&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_longtemps/curinfo&#34;</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">logdir</span>&nbsp;&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_longtemps&#34;</span>
<!--l. 1415--><p class="noindent"><span 
class="ectt-0800--87">indexdir</span>&nbsp;<span 
class="ectt-0800--87">&#34;/var/adm/amanda/chailly99_longtemps/index&#34;</span>
<!--l. 1416--><p class="indent">   La diff&eacute;rence principale r&eacute;side dans le nombre &eacute;lev&eacute; de jours (en fait &agrave; comprendre
comme sauvegardes) dans le cycle des bandes. La sauvegarde &eacute;tant hebdomadaire,
une cassette de sauvegarde ne sera pas recycl&eacute;e avant 9999 semaines, soit pr&egrave;s de
192&nbsp;ans.
<a name="subsubsection.3.3.2"></a>
<!--l. 1422--><p class="noindent">
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.2 </span> <a 
  name="x1-330003.3.2"></a>Liste des partitions &agrave; sauvegarder</h5>
<!--l. 1425--><p class="noindent">Chaque partition &agrave; sauvegarder n'a qu'&agrave; &ecirc;tre rajout&eacute;e dans le fichier
<span 
class="ectt-1000">/usr/local/etc/amanda/</span><span 
class="ecit-1000">configuration </span><span 
class="ectt-1000">/disklist</span>. En fait, comme il y a une
configuration pour la sauvegarde et une autre pour l'archivage, une partition est
rajout&eacute;e dans les 2 fichiers respectifs.
<!--l. 1430--><p class="indent">   Par exemple, dans le fichier <span class="obeylines-h"><span 
class="ectt-1000">/usr/local/etc/amanda/chailly99_jour/disklist</span></span>
on aura des lignes du style&nbsp;:

<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Esmans</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Disque</span>&nbsp;<span 
class="ectt-0800--87">interne</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">esmans</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s0</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">esmans</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s6</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">/var</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">esmans</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s4</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Interne</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">esmans</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Chailly99</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Disque</span>&nbsp;<span 
class="ectt-0800--87">interne</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">/</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s0</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">/usr</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s5</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">/var</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s6</span>&nbsp;<span 
class="ectt-0800--87">comp-root</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Interne1</span>
<!--l. 1453--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t0d0s3</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>

<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Interne2</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t1d0s3</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Interne3</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c0t1d0s4</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Verre1</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s5</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Verre2</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s6</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Verre3</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t0d0s7</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Bibendum1</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s0</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Bibendum2</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s3</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Bibendum3</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s4</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
                                                                  

                                                                  
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Bibendum4</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s5</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Bibendum5</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t1d0s6</span>&nbsp;<span 
class="ectt-0800--87">holding-disk</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne1</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s0</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne2</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s1</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne3</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s3</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne4</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s4</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne5</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s5</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne6</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s6</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">#</span>&nbsp;<span 
class="ectt-0800--87">Citerne7</span>
<!--l. 1490--><p class="noindent"><span 
class="ectt-0800--87">chailly99</span>&nbsp;<span 
class="ectt-0800--87">c1t3d0s7</span>&nbsp;<span 
class="ectt-0800--87">comp-user</span>
<!--l. 1492--><p class="indent">   On n'utilise ici que 2 types de partitions, le type comprim&eacute; logiciellement pour
partition utilisateur et le m&ecirc;me pour partition syst&egrave;me, moins prioritaire en cas de
probl&egrave;me de place sur la bande.
<a name="section.4"></a>
   <h3 class="sectionHead"><span class="titlemark">4</span> <a 
  name="x1-340004"></a>Conclusion</h3>
<!--l. 1500--><p class="noindent">Les sauvegardes sont indispensables pour pr&eacute;server les donn&eacute;es en cas de d&eacute;sastre
dans ce monde de plus en plus informatis&eacute; o&ugrave; les donn&eacute;es repr&eacute;sentent les richesses
des entreprises, des administrations et des laboratoires scientifiques. L'archivage n'est
pas non plus &agrave; n&eacute;gliger puisqu'il permet de remonter beaucoup plus loin dans le
temps afin de faire des enqu&ecirc;tes ou de r&eacute;cup&eacute;rer des fichiers perdus longtemps dans le
pass&eacute;.
<!--l. 1508--><p class="indent">   Les donn&eacute;es ont la valeur qu'on est pr&ecirc;t &agrave; d&eacute;penser pour les sauvegarder de
mani&egrave;re raisonn&eacute;e. Le co&ucirc;t en d&eacute;rouleur de bande et en cassettes de sauvegarde est
important (surtout si on fait de l'archivage <span 
class="ecti-1000">ad æternam</span>) mais on peut faire des
&eacute;conomies en utilisant le logiciel libre et gratuit <a 
  name="dx1-34001"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>qui r&eacute;pond sans probl&egrave;me
aux besoins des petites et moyennes entit&eacute;s en automatisant &agrave; outrance ces
op&eacute;rations de sauvegarde en r&eacute;seau.
<!--l. 1516--><p class="indent">   La peur qui hante tout utilisateur candidat au logiciel libre est de savoir s'il y
aura du support. <a 
  name="dx1-34002"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>existe depuis une dizaine d'ann&eacute;es et a clairement la masse
critique suffisante pour se d&eacute;velopper et s'auto-entretenir&nbsp;: <a 
  name="dx1-34003"></a><span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small> </span>est utilis&eacute; par une
communaut&eacute; importante et active qui assure une aide de pairs gr&acirc;ce &agrave; 2
listes de distribution de courriels, une pour les utilisateurs et une pour les
d&eacute;veloppeurs.
<!--l. 1523--><p class="indent">   L'avantage cl&eacute; d'un logiciel de sauvegardes libre est de ne pas &ecirc;tre prisonnier d'un
syst&egrave;me d'exploitation et d'un &eacute;diteur de logiciel qui peut dispara&icirc;tre du jour au
lendemain sans possibilit&eacute; de r&eacute;cup&eacute;rer les donn&eacute;es &agrave; moyen ou long terme (licences
expir&eacute;es, plus d'ordinateur avec le bon syst&egrave;me d'exploitation,...).
<!--l. 1529--><p class="indent">   Il est donc encore plus pertinent, dans le sens des r&eacute;centes mesures gouvernementales
&eacute;clair&eacute;es sur les logiciels et formats libres et autres standards ouverts (voir l'article&nbsp;3
de <span class="cite">[<a 
href="#XPRMX01-logiciels-libres">PRM01</a>]</span>), d'utiliser du libre dans la sauvegarde des donn&eacute;es. On pourra bien s&ucirc;r
relire les donn&eacute;es dans le futur, mais surtout les faire migrer &agrave; chaque nouvelle
g&eacute;n&eacute;ration de supports vers de nouveaux m&eacute;dia avant que les pr&eacute;c&eacute;dents ne
s'effacent. La bonne nouvelle est qu'&agrave; chaque fois les capacit&eacute;s augmentent et
qu'on peut remplacer de nombreux supports vieux par moins de supports
                                                                  

                                                                  
r&eacute;cents.
<!--l. 1539--><p class="indent">   D'un point de vue plus philosophique, sauvegardes et archivages en g&eacute;n&eacute;ral et en
r&eacute;seau en particulier posent des probl&egrave;mes juridico-techniques&nbsp;:
     <ul class="itemize1">
     <li class="itemize">toutes ces cassettes peuvent contenir des logiciels que l'on n'a pas le droit
     de copier au del&agrave; de <span 
class="ecti-1000">la </span>copie de sauvegarde<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">les copies transitent sur l'ordinateur ayant le d&eacute;rouleur de bande alors que
     ce n'est pas forc&eacute;ment autoris&eacute; par une licence bridant un logiciel sur un
     ordinateur<span class="frenchb-thinspace"> </span>;
     </li>
     <li class="itemize">comment  respecter  r&eacute;ellement  les  lois  de  la  <span 
class="eccc-1000"><small 
class="small-caps">C</small><small 
class="small-caps">N</small><small 
class="small-caps">I</small><small 
class="small-caps">L</small>  </span>par  exemple  sur  les
     donn&eacute;es d'authentification et de tra&ccedil;age, s'il faut les effacer au bout d'un
     certain temps (1 an) des sauvegardes<span class="frenchb-thinspace"> </span>? C'est difficile au milieu de plein
     d'autres  donn&eacute;es  sans  tout  effacer  le  support  et  donc  rendre  caduque
     l'archivage, c'est encore plus dur sur les supports &eacute;crivables une seule fois.</li></ul>
   <h3 class="likesectionHead"><a 
  name="x1-350004"></a>Coordonn&eacute;es de l'auteur</h3>
<!--l. 1559--><p class="noindent">Les exemples complets sont disponibles depuis la page <a 
  name="dx1-35001"></a><span 
class="eccc-1000"><small 
class="small-caps">W</small><small 
class="small-caps">W</small><small 
class="small-caps">W</small> </span>de l'auteur de cet
article et on peut y r&eacute;cup&eacute;rer la version d'origine &eacute;tendue de cet article en
<span class="LATEX">L<span class="A">A</span><span class="TEX">T<span 
class="E">E</span>X</span></span> avant sa traduction via <span class="TEX">T<span 
class="E">E</span>X</span>4ht en <a 
  name="dx1-35002"></a><span 
class="eccc-1000"><small 
class="small-caps">H</small><small 
class="small-caps">T</small><small 
class="small-caps">M</small><small 
class="small-caps">L</small> </span>et sa digestion par Word &agrave;
<a 
href="http://www.cri.ensmp.fr/~keryell/publications/conf/2001/JRES2001/amanda/" ><span 
class="ectt-0900">http://www.cri.ensmp.fr/~keryell/publications/conf/2001/JRES2001/amanda/</span></a>.
<!--l. 1565--><p class="noindent">Laboratoire Informatique et T&eacute;l&eacute;communications
<br class="newline">&Eacute;cole Nationale Sup&eacute;rieure des T&eacute;l&eacute;communications de Bretagne
<br class="newline">BP832, 29285 BREST CEDEX, FRANCE.
<br class="newline">T&eacute;l.&nbsp;: (+33|0) 2.29.00.14.15, fax.&nbsp;: (+33|0) 2.29.00.12.82.
<br class="newline"><a 
href="mailto:Ronan.Keryell@enst-bretagne.fr" ><span 
class="ectt-0900">mailto:Ronan.Keryell@enst-bretagne.fr</span></a>
<br class="newline"><a 
href="http://www-info.enst-bretagne.fr/~keryell" ><span 
class="ectt-0900">http://www-info.enst-bretagne.fr/~keryell</span></a>
   <h3 class="likesectionHead"><a 
  name="x1-360004"></a>R&eacute;f&eacute;rences</h3>
<!--l. 2--><p class="noindent">
        <div class="thebibliography"><p class="bibitem"><span class="biblabel">
 <a name="cite.WWW-amanda">[AMA]</a>   <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="XWWW-amanda"></a>&#171;  <span 
class="eccc-1000"><small 
class="small-caps">A</small><small 
class="small-caps">M</small><small 
class="small-caps">A</small><small 
class="small-caps">N</small><small 
class="small-caps">D</small><small 
class="small-caps">A</small></span>&nbsp;:  The  Advanced  Maryland  Automatic  Network  Disk
        Archiver &#187;. <a 
href="http://www.amanda.org" ><span 
class="ectt-0900">http://www.amanda.org</span></a>.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.WWW-cfengine">[Bur01]</a>  <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="XWWW-cfengine"></a>Mark <span 
class="eccc-1000">B<small 
class="small-caps">U</small><small 
class="small-caps">R</small><small 
class="small-caps">G</small><small 
class="small-caps">E</small><small 
class="small-caps">S</small><small 
class="small-caps">S</small></span>. &#171; Cfengine&nbsp;: A configuration engine &#187;, 2001.
        <br class="newline"><a 
href="http://www.cfengine.org" ><span 
class="ectt-0900">http://www.cfengine.org</span></a>.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.Grosch_law_revisited">[ED85]</a>   <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="XGrosch_law_revisited"></a>Phillip <span 
class="eccc-1000">E<small 
class="small-caps">I</small><small 
class="small-caps">N</small>-D<small 
class="small-caps">O</small><small 
class="small-caps">R</small></span>. &#171; Grosch's Law Re-Revisited: CPU Power and the
        Cost of Computation &#187;. <span 
class="ecti-1000">Communications of the ACM</span>, 28(2):142&#8211;151,
        f&eacute;vrier 1985.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.jackson99-amanda">[JO99]</a>   <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="Xjackson99-amanda"></a>John&nbsp;R. <span 
class="eccc-1000">J<small 
class="small-caps">A</small><small 
class="small-caps">C</small><small 
class="small-caps">K</small><small 
class="small-caps">S</small><small 
class="small-caps">O</small><small 
class="small-caps">N</small> </span>et Alexandre <span 
class="eccc-1000">O<small 
class="small-caps">L</small><small 
class="small-caps">I</small><small 
class="small-caps">V</small><small 
class="small-caps">A</small></span>.  &#171; <span 
class="ecti-1000">Unix Backup &amp; Recovery</span>
                                                                  

                                                                  
        &#187;, Chapitre Using Amanda. O'Reilly and Associates, novembre 1999.
        <a 
href="http://www.backupcentral.com/amanda.html" ><span 
class="ectt-0900">http://www.backupcentral.com/amanda.html</span></a>.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.keryell01-JRES-cfengine">[Ker01]</a>  <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="Xkeryell01-JRES-cfengine"></a>Ronan   <span 
class="eccc-1000">K<small 
class="small-caps">E</small><small 
class="small-caps">R</small><small 
class="small-caps">Y</small><small 
class="small-caps">E</small><small 
class="small-caps">L</small><small 
class="small-caps">L</small></span>.      &#171;   Utilisation   du   logiciel   d'administration
        automatique     Cfengine     &#187;.               Dans     <span 
class="ecti-1000">Actes     de     la</span>
        <span 
class="ecti-1000">conf</span><span 
class="ecti-1000">&eacute;rence     </span><span 
class="eccc-1000"><small 
class="small-caps">J</small><small 
class="small-caps">R</small><small 
class="small-caps">E</small><small 
class="small-caps">S</small></span><span 
class="ecti-1000">2001</span>,      Lyon,      France,      d&eacute;cembre      2001.
        <a 
href="http://www.cri.ensmp.fr/~keryell/publications/conf/2001/JRES2001/cfengine" ><span 
class="ectt-0900">http://www.cri.ensmp.fr/~keryell/publications/conf/2001/JRES2001/cfengine</span></a>.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.preston99-unix_backup_recov">[Pre99]</a>  <span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="Xpreston99-unix_backup_recov"></a>W.&nbsp;Curtis                                                                 <span 
class="eccc-1000">P<small 
class="small-caps">R</small><small 
class="small-caps">E</small><small 
class="small-caps">S</small><small 
class="small-caps">T</small><small 
class="small-caps">O</small><small 
class="small-caps">N</small></span>.
        <span 
class="ecti-1000">Unix Backup &amp; Recovery</span>.  O'Reilly and Associates, novembre 1999.
        <a 
href="http://www.backupcentral.com/thebook.html" ><span 
class="ectt-0900">http://www.backupcentral.com/thebook.html</span></a>.
        </p><p class="bibitem"><span class="biblabel">
 <a name="cite.PRMX01-logiciels-libres">[PRM01]</a><span class="bibsp">&nbsp;&nbsp;&nbsp;</span></span><a 
  name="XPRMX01-logiciels-libres"></a>&#171;   D&eacute;cret   no   2001-737   du   22   ao&ucirc;t   2001   portant   cr&eacute;ation
        de   l'Agence   pour   les   technologies   de   l'information   et   de
        la    communication    dans    l'administration    &#187;,    ao&ucirc;t    2001.
        <a 
href="http://www.legifrance.gouv.fr/citoyen/jorf_nor.ow?numjo=PRMX0105055D" ><span 
class="ectt-0900">http://www.legifrance.gouv.fr/citoyen/jorf_nor.ow</span><span class="frenchb-thinspace"></span><span 
class="ectt-0900">?numjo=PRMX0105055D</span></a>.
        </p></div>
    
</body></html> 

                                                                  


